(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{467:function(a,e,t){"use strict";t.r(e);var n=t(42),r=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"playmaker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#playmaker"}},[a._v("#")]),a._v(" Playmaker")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368",target:"_blank",rel:"noopener noreferrer"}},[a._v("PlayMaker"),t("OutboundLink")],1),a._v(" 是用于unity很受欢迎的可视化编程扩展，旨在用于便于无代码基础的人使用。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/0a5b219b059fd61c85d225e903d77857.png",alt:""}})]),a._v(" "),t("p",[a._v("请注意，与默认情况下所有Naninovel的C＃API均可用的Bolt相比，PlayMaker要求为每个操作创建一个特殊的C＃类。意味着只有少部分引擎API在playmaker下可用。如果Naninovel的API发生更改，可用的自定义操作也可能会中断。")]),a._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("安装playmaker参考"),t("a",{attrs:{href:"https://hutonggames.fogbugz.com/default.asp?W11",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),t("OutboundLink")],1),a._v(" 。")]),a._v(" "),t("p",[a._v("下载并导入"),t("a",{attrs:{href:"https://github.com/Naninovel/PlayMaker/raw/master/NaninovelPlayMaker.unitypackage",target:"_blank",rel:"noopener noreferrer"}},[a._v("PlayMaker引擎扩展包"),t("OutboundLink")],1),a._v(" 。")]),a._v(" "),t("p",[a._v("自定义Naninovel操作应出现在PlayMaker操作浏览器的“ Naninovel”类别下。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://i.gyazo.com/a40b0b7b21c73d3b5f64b005085198ea.png",alt:""}})]),a._v(" "),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),t("p",[a._v("以下视频演示了如何使用PlayMaker FSM（有限状态机）初始化Naninovel引擎，预加载并运行脚本。")]),a._v(" "),t("p"),t("div",{staticClass:"video-container"},[t("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/N856vi18XVU",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),t("p"),a._v(" "),t("h3",{attrs:{id:"事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[a._v("#")]),a._v(" 事件")]),a._v(" "),t("p",[a._v("一些重要的Naninovel事件可以自动发送到PlayMaker FSM。为此，请创建一个具有适当名称的全局"),t("a",{attrs:{href:"https://hutonggames.fogbugz.com/default.asp?W148",target:"_blank",rel:"noopener noreferrer"}},[a._v("用户事件"),t("OutboundLink")],1),a._v(" ，并在FSM中使用它。以下是可用的事件名称：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("Naninovel/Engine/OnInitialized")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/ScriptPlayer/OnPlay")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/ScriptPlayer/OnStop")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/StateManager/OnGameSaveStarted")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/StateManager/OnGameSaveFinished")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/StateManager/OnGameLoadStarted")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/StateManager/OnGameLoadFinished")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/TextPrinterManager/OnPrintTextStarted")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/TextPrinterManager/OnPrintTextFinished")])]),a._v(" "),t("li",[t("code",[a._v("Naninovel/LocalizationManager/OnLocaleChanged")])])]),a._v(" "),t("p",[a._v("也可以使用以下 "),t("code",[a._v("@playmaker")]),a._v(" 命令从naninovel脚本中广播自定义PlayMaker事件：")]),a._v(" "),t("div",{staticClass:"language-nani extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nani"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@playmaker")]),t("span",{pre:!0,attrs:{class:"token command-params"}},[t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("EventName")])])]),a._v("\n")])])]),t("p",[a._v("— 将在场景中所有活动的FSM中调用一个名为“ EventName”的全局用户事件。")]),a._v(" "),t("p",[a._v("该命令还允许使用 "),t("code",[a._v("fsm")]),a._v(" 和 "),t("code",[a._v("object")]),a._v(" 参数将事件发送到特定的FSM 。第一个参数允许指定FSM名称，该名称应接收事件，例如：")]),a._v(" "),t("div",{staticClass:"language-nani extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nani"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@playmaker")]),t("span",{pre:!0,attrs:{class:"token command-params"}},[t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("EventName")]),t("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" fsm:")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Fsm1,Fsm2")])])]),a._v("\n")])])]),t("p",[a._v("— 将为名称为“ Fsm1”和“ Fsm2”的FSM调用名为“ EventName”的事件。")]),a._v(" "),t("p",[a._v("当 "),t("code",[a._v("object")]),a._v(" 指定参数时，事件将仅发送到应用于游戏对象的FSM，FSM具有相应的名称，例如：")]),a._v(" "),t("div",{staticClass:"language-nani extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nani"}},[t("code",[t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@playmaker")]),t("span",{pre:!0,attrs:{class:"token command-params"}},[t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("EventName")]),t("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" object:")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Obj1,Obj2")])])]),a._v("\n")])])]),t("p",[a._v("— 将为所有绑定到名称分别为“ Obj1”和“ Obj2”的游戏对象的FSM调用一个名为“ EventName”的事件。")]),a._v(" "),t("p",[a._v("您还可以结合使用 "),t("code",[a._v("fsm")]),a._v(" 和 "),t("code",[a._v("object")]),a._v(" 参数来进一步过滤应接收事件的FSM。")]),a._v(" "),t("h3",{attrs:{id:"全局变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局变量"}},[a._v("#")]),a._v(" 全局变量")]),a._v(" "),t("p",[a._v("可以使用扩展包中提供的以下自定义"),t("RouterLink",{attrs:{to:"/zh/guide/script-expressions.html#表达式函数"}},[a._v("表达式函数")]),a._v(" 来访问Naninovel脚本中的全局PlayMaker变量：")],1),a._v(" "),t("ul",[t("li",[t("code",[a._v('GetPlayMakerGlobalVariable("variableName")')]),a._v(" —检索名称为“ variableName”简单类型的变量（int，float，string等）")]),a._v(" "),t("li",[t("code",[a._v('GetPlayMakerGlobalArray("variableName", arrayIndex)')]),a._v(" —检索存储在名称为“ variableName”的数组变量的“arrayIndex”索引处的值")])]),a._v(" "),t("p",[a._v('假设有一个"Score"整数和 "FinishedRoutes" 布尔数组全局PlayMaker变量，则可以在Naninovel脚本中使用它们，如下所示：')]),a._v(" "),t("div",{staticClass:"language-nani extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nani"}},[t("code",[t("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Felix: My score is "),t("span",{pre:!0,attrs:{class:"token expression selector"}},[a._v('{GetPlayMakerGlobalVariable("Score")}')]),a._v(".")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@if")]),t("span",{pre:!0,attrs:{class:"token command-params"}},[t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),t("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('GetPlayMakerGlobalArray("FinishedRoutes",2)')])])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("    Third route (second array index) is completed.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@else")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("    Not yet.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token command function"}},[t("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@endif")])]),a._v("\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);