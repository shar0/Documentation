(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{390:function(a,t,e){"use strict";e.r(t);var s=e(42),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"инвентарь"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#инвентарь"}},[a._v("#")]),a._v(" Инвентарь")]),a._v(" "),e("p",[a._v("Хотя система инвентаря несколько не в духе игр вроде VN, нам поступило много запросов и просьб интегрировать таковую в Naninovel. "),e("a",{attrs:{href:"https://github.com/Naninovel/Inventory",target:"_blank",rel:"noopener noreferrer"}},[a._v("Проект на GitHub"),e("OutboundLink")],1),a._v(" служит как примером для создания и интеграции инвентаря в движок, так и расширением, которое вы можете легко настроить для Naninovel.")]),a._v(" "),e("p",[a._v("Демонтрационный проект показывает, как создать пользовательский интерфейс инвентаря с макетом сетки, разбиением на страницы и перетаскиванием окна, как добавить пользовательский сервис движка и связанное с ним меню конфигурации, добавить вводные привязки, использовать аутсорсинг состояния, авторские пользовательские команды сценария и функции выражений.")]),a._v(" "),e("p",[e("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[e("source",{attrs:{src:"https://i.gyazo.com/86c577f007daf4ec5d79c0e91db7bc10.mp4",type:"video/mp4"}})])]),a._v(" "),e("p",[a._v("Вы можете "),e("a",{attrs:{href:"https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository",target:"_blank",rel:"noopener noreferrer"}},[a._v("клонировать репозиторий проекта с помощью клиента Git"),e("OutboundLink")],1),a._v(" или "),e("a",{attrs:{href:"https://github.com/Naninovel/Demo/archive/master.zip",target:"_blank",rel:"noopener noreferrer"}},[a._v("скачать его в виде zip-архива"),e("OutboundLink")],1),a._v(".")]),a._v(" "),e("div",{staticClass:"custom-block warn"},[e("p",{staticClass:"custom-block-title"},[a._v("ВНИМАНИЕ")]),a._v(" "),e("p",[a._v("Пакет Naninovel не распространяется вместе с проектом, поэтому ошибки компиляции будут создаваться после его первого открытия; импортируйте Naninovel из Asset Store, чтобы исправить эти ошибки.")])]),a._v(" "),e("h2",{attrs:{id:"установка"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#установка"}},[a._v("#")]),a._v(" Установка")]),a._v(" "),e("p",[a._v("Чтобы настроить расширение инвентаря для существующего проекта Unity, используйте "),e("a",{attrs:{href:"https://docs.unity3d.com/Manual/upm-ui.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("UPM"),e("OutboundLink")],1),a._v(" чтобы установить пакет через следующий URL-адрес Git: "),e("code",[a._v("https://github.com/Naninovel/Inventory.git?path=Assets/NaninovelInventory")]),a._v("; или скачайте и импортируйте "),e("a",{attrs:{href:"https://github.com/Naninovel/Inventory/raw/master/NaninovelInventory.unitypackage",target:"_blank",rel:"noopener noreferrer"}},[a._v("NaninovelInventory.unitypackage"),e("OutboundLink")],1),a._v(" вручную.")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/b54e9daa9a483d9bf7f74f0e94b2d38a.gif",alt:""}})]),a._v(" "),e("h2",{attrs:{id:"испоnьзование"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#испоnьзование"}},[a._v("#")]),a._v(" Использование")]),a._v(" "),e("p",[a._v("Чтобы создать готовый интерфейс инвентаря из шаблона, используйте контекстное меню ассета "),e("code",[a._v("Create -> Naninovel -> Inventory -> Inventory UI")]),a._v(". Затем добавьте префаб для ресурсов UI Naninovel через меню редактора "),e("code",[a._v("Naninovel -> Resources -> UI")]),a._v(". После добавления интерфейс может быть показан/скрыт, как и все другие UI, с помощью команд "),e("a",{attrs:{href:"/api/#showui",target:"_blank"}},[e("code",[a._v("@showUI")])]),a._v(" и "),e("a",{attrs:{href:"/api/#hideui",target:"_blank"}},[e("code",[a._v("@hideUI")])]),a._v(".")]),a._v(" "),e("p",[a._v("Компонент UI инвентаря имеет свойство "),e("code",[a._v("Capacity")]),a._v(", с помощью которого вы можете изменить количество слотов в инвентаре. Сетка слотов настраивается (номер слота и макет, слоты на странице и т.д.) с помощью игрового объекта "),e("code",[a._v("Content/InventoryGrid")]),a._v(". Поведение перетаскивания окна можно настроить (отключить) с помощью компонента "),e("code",[a._v("Drag Drop")]),a._v(", прикрепленного к игровому объекту "),e("code",[a._v("Content")]),a._v(".")]),a._v(" "),e("p",[a._v("Префабы предметов инвентаря можно создать с помощью контекстного меню ассета "),e("code",[a._v("Create -> Naninovel -> Inventory -> Inventory Item")]),a._v(". Затем префабы предметов должны быть назначены в качестве ресурсов инвентаря через меню редактора "),e("code",[a._v("Naninovel -> Resources -> Inventory")]),a._v(".")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/6062f8a433a47306f582a849c7bbf57e.png",alt:""}})]),a._v(" "),e("p",[a._v("Если у вас много предметов и их неудобно назначать через меню редактора, можно просто поместить их в папку "),e("code",[a._v("Resources/Naninovel/Inventory")]),a._v(", и они автоматически будут предоставлены движку. Вы можете дополнительно организовать их с помощью подпапок, если хотите; в этом случае используйте прямые косые черты ("),e("code",[a._v("/")]),a._v(") при ссылке на них в сценариях Naninovel. Например, элемент, сохранённый как "),e("code",[a._v("Resources/Naninovel/Inventory/Armor/FullPlate.prefab")]),a._v(", может использоваться в сценариях в качестве "),e("code",[a._v("Armor/FullPlate")]),a._v(".")]),a._v(" "),e("p",[a._v("Также можно использовать "),e("RouterLink",{attrs:{to:"/ru/guide/resource-providers.html#адресация"}},[a._v("адресируемую систему ассетов")]),a._v(' для ручного предоставления ресурсов. Чтобы предоставить доступ к ассету, назначьте адрес, равный пути, который вы использовали бы для его предоставления с помощью описанного выше метода, за исключением опущенной части "Resources/". Например, выставить "FullPlate.prefab", назначьте префабу следующий адрес:'),e("code",[a._v("Naninovel/Inventory/FullPlate")]),a._v(". Имейте в виду, что адресируемый провайдер по умолчанию не используется в редакторе; вы можете разрешить его, включив свойство "),e("code",[a._v("Enable Addressable In Editor")]),a._v(" в меню конфигурации провайдера ресурсов.")],1),a._v(" "),e("p",[a._v("Каждый предмет имеет свойство "),e("code",[a._v("Stack Count Limit")]),a._v(", чтобы ограничить количество предметов этого типа, которые могут быть уложены в один слот инвентаря, и событие Unity "),e("code",[a._v("On Item Used")]),a._v(", которое вызывается при использовании предмета (либо с помощью команды "),e("code",[a._v("@useItem")]),a._v(", либо когда пользователь нажимает на предмет в инвентаре). Ниже приведен пример того, как вы можете настроить событие с помощью компонента "),e("code",[a._v("Play Script")]),a._v(", чтобы удалить предмет после его использования, создать спецэффект сбоя и вывести текстовое сообщение.")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/010a9ba35db607ba46d78eda3513f678.png",alt:""}})]),a._v(" "),e("p",[a._v("Вы можете добавить предметы в инвентарь с помощью команды "),e("code",[a._v("@addItem")]),a._v(" и удалить с помощью команды  "),e("code",[a._v("@removeItem")]),a._v(" (или "),e("code",[a._v("@removeItemAt")]),a._v(", "),e("code",[a._v("@removeAllItems")]),a._v("). ID предметов равны именам их префабов. ID слотов инвентаря равны индексам слотов сетки (например, первый слот равен 0, второй – 1 и т.д.).")]),a._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ru/guide/script-expressions.html#expression-functions"}},[a._v("Пользовательские функции")]),a._v(" "),e("code",[a._v("ItemExist()")]),a._v(" и "),e("code",[a._v("ItemCount()")]),a._v(" для проверки наличия предметов в инвентаре и количества существующих предметов также доступны для удобства.")],1),a._v(" "),e("p",[a._v("Ниже приведен скрипт из демонстрационного проекта:")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# Start")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Select an action."),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("skipInput")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])])]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Pick up sword"')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("!ItemExist(")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Sword"')]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" do:")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"@addItem Sword, @goto .Adventure"')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Pick up armor"')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("!ItemExist(")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Armor"')]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" do:")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"@addItem Armor, @goto .Adventure"')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Adventure awaits, venture forth!"')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stop")])]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# Adventure")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@if")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('ItemExist("Sword")')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@set")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('monstersSlayed="')])]),e("span",{pre:!0,attrs:{class:"token expression selector"}},[a._v('{ItemExist("Armor") ? Random(3,5) : 2}')]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('"')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@addItem")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Food")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" amount:")])]),e("span",{pre:!0,attrs:{class:"token expression selector"}},[a._v("{monstersSlayed}")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\tYou've encountered and slayed "),e("span",{pre:!0,attrs:{class:"token expression selector"}},[a._v("{monstersSlayed}")]),a._v(" monsters with your sword."),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("if")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("!ItemExist(")]),e("span",{pre:!0,attrs:{class:"token quoted-string"}},[a._v('"Armor"')]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" You could've been more productive with an armor, though."),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("endif")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("i")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("showUI")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Inventory")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("wait:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" Check your inventory for the loot!")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Start")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@else")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\tBut you don't have a weapon! You've been beaten by the monsters."),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("if")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ItemExist(")]),e("span",{pre:!0,attrs:{class:"token quoted-string"}},[a._v('"Armor"')]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" At least it didn't hurt that much, thanks to the armor."),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("endif")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" Let's prepare better next time.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Start")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@endif")])]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);