(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{511:function(a,t,s){"use strict";s.r(t);var e=s(42),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"音频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#音频"}},[a._v("#")]),a._v(" 音频")]),a._v(" "),s("p",[a._v("背景音乐和音效会在本文介绍，语音部分请看"),s("RouterLink",{attrs:{to:"/guide/voicing.html"}},[a._v("语音引导")]),a._v(" 。")],1),a._v(" "),s("p",[a._v("要添加，编辑和移除影片资源，使用"),s("code",[a._v("Naninovel -> Resources -> Audio")]),a._v("菜单内的配置。你可以使用任何 "),s("a",{attrs:{href:"https://docs.unity3d.com/Manual/AudioFiles.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Unity支持"),s("OutboundLink")],1),a._v(" 的影片格式。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/cacdec36623dbbfcf9f49c594de53c0f.png",alt:""}})]),a._v(" "),s("p",[a._v("在通过编辑器菜单添加多个背景的时候，可能并不方便，在\n"),s("code",[a._v("Resources/Naninovel/Audio")]),a._v("目录下直接拖入资源，这样添加也是可以的。他们就会被自动被注册至脚本。你也可以通过子文件夹来管理相应资源。脚本中需要使用("),s("code",[a._v("/")]),a._v(")调用。比如"),s("code",[a._v("Resources/Naninovel/Audio/Music/Ambient/Noise002.wav")]),a._v("的资源，脚本中的调用为： "),s("code",[a._v("Music/Ambient/Noise002")]),a._v("。")]),a._v(" "),s("p",[a._v("使用"),s("RouterLink",{attrs:{to:"/zh/guide/resource-providers.html#寻址资源系统"}},[a._v("可寻址资源系统")]),a._v(' 来手动公开资源也是可以的。公开资源地址和上述相同，但是需要省略"Resources/"部分。比如开放 "MainTheme.wav" 背景音乐，注册地址为'),s("code",[a._v("Naninovel/Audio/MainTheme")]),a._v("。注意，该系统默认不启用你可以通过资源配置菜单的"),s("code",[a._v("Enable Addressable In Editor")]),a._v("属性来启用。")],1),a._v(" "),s("div",{staticClass:"custom-block warn"},[s("p",{staticClass:"custom-block-title"},[a._v("警告")]),a._v(" "),s("p",[a._v("未通过资源管理器分配的音频资产将无法在各种编辑器下拉菜单中使用，比如用于角色元素的 "),s("code",[a._v("Message Sound")]),a._v(" 的菜单中。")])]),a._v(" "),s("p",[a._v("可以使用 "),s("code",[a._v("Naninovel -> Configuration -> Audio")]),a._v(" 菜单配置音频表现。有关可用选项的信息，请参阅"),s("RouterLink",{attrs:{to:"/zh/guide/configuration.html#音频"}},[a._v("属性配置")]),a._v("。")],1),a._v(" "),s("h2",{attrs:{id:"背景音乐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景音乐"}},[a._v("#")]),a._v(" 背景音乐")]),a._v(" "),s("p",[a._v("使用 "),s("a",{attrs:{href:"/api/#bgm",target:"_blank"}},[s("code",[a._v("@bgm")])]),a._v(" 命令后跟剪辑名称来控制在naninovel脚本中的音乐播放：")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Starts playing a music track with the name `Sanctuary` in a loop")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Sanctuary")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Same as above, but fades-in the volume over 10 seconds and plays only once")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Sanctuary")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" fade:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("10")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" loop:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Changes volume of all the played music tracks to 50% over 2.5 seconds and makes them play in a loop")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" volume:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("0.5")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" loop:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" time:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("2.5")])])]),a._v("\n")])])]),s("p",[a._v("音轨默认循环播放。在 "),s("a",{attrs:{href:"/api/#bgm",target:"_blank"}},[s("code",[a._v("@bgm")])]),a._v(" 命令后未定义名字时，所有当前播放的音轨都会收到该命令影响。当音轨正在播放时，不会受到影响（不会重头播放），但是个别参数（音量，循环）会被应用。")]),a._v(" "),s("p",[a._v("使用 "),s("code",[a._v("intro")]),a._v(" 参数，可以播放一次性前奏再接其他音轨循环播放，比如：")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 播放 `BattleThemeIntro` 一次然后立即循环播放 `BattleThemeMain` 。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("BattleThemeMain")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" intro:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("BattleThemeIntro")])])]),a._v("\n")])])]),s("p",[a._v("要停止播放音乐，使用 "),s("a",{attrs:{href:"/api/#stopbgm",target:"_blank"}},[s("code",[a._v("@stopBgm")])]),a._v(" 命令接剪辑名称。如果未指定片段名称，该命令将停止所有当前播放的曲目。")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Fades-out the `Promenade` music track over 10 seconds and stops the playback")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stopBgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Promenade")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" fade:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("10")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Stops all the currently played music tracks")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stopBgm")])]),a._v("\n")])])]),s("h2",{attrs:{id:"音效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#音效"}},[a._v("#")]),a._v(" 音效")]),a._v(" "),s("p",[a._v("使用"),s("a",{attrs:{href:"/api/#sfx",target:"_blank"}},[s("code",[a._v("@sfx")])]),a._v(" 和 "),s("a",{attrs:{href:"/api/#stopsfx",target:"_blank"}},[s("code",[a._v("@stopSfx")])]),a._v("命令跟剪辑名称，以在naninovel脚本中控制音效的播放：")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 播放 `Explosion` 音效一次")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@sfx")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Explosion")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 循环播放  `Rain`  音效")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@sfx")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Rain")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" loop:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("true")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 2.5秒内调整所有音量到75%，并关闭所有循环播放选项")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@sfx")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" volume:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("0.75")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" loop:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" time:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("2.5")])])]),a._v("\n")])])]),s("p",[a._v("音效默认不循环播放。在 "),s("a",{attrs:{href:"/api/#sfx",target:"_blank"}},[s("code",[a._v("@sfx")])]),a._v(" 命令后未定义名字时，所有当前播放的音轨都会收到该命令影响。当音轨正在播放时，不会受到影响（不会重头播放），但是个别参数（音量，循环）会被应用。")]),a._v(" "),s("p",[a._v("要停止播放音效（无论是否循环），使用 "),s("a",{attrs:{href:"/api/#stopsfx",target:"_blank"}},[s("code",[a._v("@stopSfx")])]),a._v(" 命令接音效名字。当音效名字未定义，该命令会停止当前所有音效播放。")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 停止播放 `Rain`，15淡出。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stopSfx")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Rain")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" fade:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("15")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 停止所有音效播放。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stopSfx")])]),a._v("\n")])])]),s("h2",{attrs:{id:"混音器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#混音器"}},[a._v("#")]),a._v(" 混音器")]),a._v(" "),s("p",[a._v("Nanonovel使用了"),s("a",{attrs:{href:"https://docs.unity3d.com/Manual/AudioMixer.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("混音器"),s("OutboundLink")],1),a._v(" 来分离背景音乐，音效和语音音轨。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/6271d59ee9ac63a0a218316bd3bc78a8.png",alt:""}})]),a._v(" "),s("p",[a._v("可以在音频配置菜单中分配自定义混音器，更改用于每个音频通道的组和音量控制处理（公开的参数名称）。如果未分配自定义混音器，将使用默认配置。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/ef2db68edb871608d1718117a37e9486.png",alt:""}})]),a._v(" "),s("p",[a._v("要通过自定义混音器组播放音频，使用"),s("a",{attrs:{href:"/api/#bgm",target:"_blank"}},[s("code",[a._v("@bgm")])]),a._v(", "),s("a",{attrs:{href:"/api/#sfx",target:"_blank"}},[s("code",[a._v("@sfx")])]),a._v(" 和 "),s("a",{attrs:{href:"/api/#voice",target:"_blank"}},[s("code",[a._v("@voice")])]),a._v(" 命令内的 "),s("code",[a._v("group")]),a._v(" 参数。")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 通过 `Master/Ambient` 混音器组播放`Noise` ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@sfx")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Noise")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" loop:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" group:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Master/Ambient")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; 通过 `Master/Reverb` 混音器组播放 `ScaryVoice`")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@voice")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ScaryVoice")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" group:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Master/Reverb")])])]),a._v("\n")])])]),s("p",[a._v("组别是通过 "),s("code",[a._v("FindMatchingGroups(groupPath)")]),a._v(" 方法来检索当前的注册混音器。参考"),s("a",{attrs:{href:"https://docs.unity3d.com/ScriptReference/Audio.AudioMixer.FindMatchingGroups",target:"_blank",rel:"noopener noreferrer"}},[a._v("Unity文档"),s("OutboundLink")],1),a._v(" 获取更多关于混音器组路径的说明。如果提供路径下有多个组别，会使用第一个来播放音频。")]),a._v(" "),s("p",[a._v("在 C# 脚本中，当前使用的混音器通过"),s("RouterLink",{attrs:{to:"/zh/guide/engine-services.html"}},[a._v("引擎服务")]),a._v(" 的"),s("code",[a._v("IAudioManager")]),a._v(" 来获取：")],1),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("var audioManager = Engine.GetService<IAudioManager>();")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("var audioMixer = audioManager.AudioMixer;")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);