(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{387:function(a,t,s){"use strict";s.r(t);var e=s(42),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"сценарии-naninovel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#сценарии-naninovel"}},[a._v("#")]),a._v(" Сценарии Naninovel")]),a._v(" "),s("p",[a._v("Скрипты Naninovel – это текстовые документы (c расширениеv "),s("code",[a._v(".nani")]),a._v("), где вы контролируете то, что происходит в сценах. Ассеты сценариев создаются с помощью контекстного меню ассета "),s("code",[a._v("Create -> Naninovel -> Naninovel Script")]),a._v(". Вы можете открывать и редактировать их с помощью встроенного "),s("a",{attrs:{href:"#visual-editor"}},[a._v("визуального редактора")]),a._v(" или с помощью внешнего текстового редактора, например блокнот, TextEdit или "),s("a",{attrs:{href:"https://code.visualstudio.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("VS Code"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/f552c2ef323f9ec1171eba72e0c55432.png",alt:""}})]),a._v(" "),s("p",[a._v("Каждая строка в сценарии Naninovel представляет собой инструкцию, которая может быть командой, обычным текстом, меткой или комментарием. Тип оператора определяется литералом, который помещается в начале строки:")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("Литерал")]),a._v(" "),s("th",[a._v("Тип инструкции")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("@")]),a._v(" "),s("td",[s("a",{attrs:{href:"#command-lines"}},[a._v("Команда")])])]),a._v(" "),s("tr",[s("td",[a._v("#")]),a._v(" "),s("td",[s("a",{attrs:{href:"#label-lines"}},[a._v("Метка")])])]),a._v(" "),s("tr",[s("td",[a._v(";")]),a._v(" "),s("td",[s("a",{attrs:{href:"#comment-lines"}},[a._v("Комментарий")])])])])]),a._v(" "),s("p",[a._v("Если в начале строки нет ни одного из вышеуказанных литералов, она воспринимается как строка "),s("a",{attrs:{href:"#generic-text-lines"}},[a._v("общего текста")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"командные-строки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#командные-строки"}},[a._v("#")]),a._v(" Командные строки")]),a._v(" "),s("p",[a._v("Строка воспринимается как командная, если начинается с литерала "),s("code",[a._v("@")]),a._v(". Команда представляет собой одиночную операцию, которая управляет тем, что происходит в сцене; например, она может быть использована для изменения фона, перемещения персонажа или загрузки другого сценария Naninovel.")]),a._v(" "),s("h3",{attrs:{id:"идентификатор-команды"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#идентификатор-команды"}},[a._v("#")]),a._v(" Идентификатор команды")]),a._v(" "),s("p",[a._v("Сразу после литерала команды ожидается идентификатор команды. Это может быть либо имя класса C#, реализующего команду, либо псевдоним команды (если он применяется через атрибут "),s("code",[a._v("CommandAlias")]),a._v(").")]),a._v(" "),s("p",[a._v("Например, команда "),s("a",{attrs:{href:"/api/#save",target:"_blank"}},[s("code",[a._v("@save")])]),a._v(" (используемая для автоматического сохранения игры) реализуется через C# класс "),s("code",[a._v("AutoSave")]),a._v(". Реализующий класс также имеет атрибут "),s("code",[a._v('[CommandAlias("save")]')]),a._v(", поэтому для вызова этой команды в скрипте можно использовать операторы "),s("code",[a._v("@save")]),a._v(" и "),s("code",[a._v("@AutoSave")]),a._v(".")]),a._v(" "),s("p",[a._v("Идентификаторы команд не чувствительны к регистру; все следующие операторы действительны и вызовут одну и ту же команду "),s("code",[a._v("AutoSave")]),a._v(":")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@save")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@Save")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@AutoSave")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@autosave")])]),a._v("\n")])])]),s("h3",{attrs:{id:"параметры-команд"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#параметры-команд"}},[a._v("#")]),a._v(" Параметры команд")]),a._v(" "),s("p",[a._v('Большинство команд имеют ряд параметров, определяющих действие команды. Параметр – это выражение типа "ключ-значение", определяемое после командного литерала, разделенного столбцом ('),s("code",[a._v(":")]),a._v("). Идентификатор параметра (ключ) может быть либо именем соответствующего поля параметра класса реализации команды, либо псевдонимом параметра (если он определен через свойство "),s("code",[a._v("alias")]),a._v(" атрибута "),s("code",[a._v("CommandParameter")]),a._v(").")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@commandId")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" paramId:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("paramValue")])]),s("span",{pre:!0,attrs:{class:"token whitespaces"}},[a._v(" ")])]),a._v("\n")])])]),s("p",[a._v("Рассмотрим команду "),s("a",{attrs:{href:"/api/#hidechars",target:"_blank"}},[s("code",[a._v("@hideChars")])]),a._v(", которая используется для скрытия всех видимых персонажей в сцене. Её можно использовать следующим образом:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@hideChars")])]),a._v("\n")])])]),s("p",[a._v("Вы можете здесь использовать параметр "),s("code",[a._v("time")]),a._v(" типа "),s("em",[a._v("Decimal")]),a._v(" для того, чтобы указать, как долго персонажи будут растворяться, прежде чем полностью скроются (исчезнут из сцены):")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@hideChars")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" time:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("5.5")])])]),a._v("\n")])])]),s("p",[a._v("Так персонажи будут угасать в течение 5.5 секунд до того, как полностью исчезнут из сцены.")]),a._v(" "),s("p",[a._v("Вы также можете использовать параметр "),s("code",[a._v("wait")]),a._v(" типа "),s("em",[a._v("Boolean")]),a._v(", чтобы указать, следует ли выполнять следующую команду сразу после завершения текущей команды или дождаться ее завершения:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@hideChars")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" time:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("5.5")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" wait:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@hidePrinter")])]),a._v("\n")])])]),s("p",[a._v("Так текстовый принтер скроется сразу после того, как персонажи начнут исчезать. Если "),s("code",[a._v("wait")]),a._v(" будет иметь значение "),s("code",[a._v("true")]),a._v(" (или значение не будет указано), принтер будет скрыт только тогда, когда "),s("a",{attrs:{href:"/api/#hidechars",target:"_blank"}},[s("code",[a._v("@hideChars")])]),a._v(" завершит выполнение.")]),a._v(" "),s("h3",{attrs:{id:"типы-значений-параметров"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#типы-значений-параметров"}},[a._v("#")]),a._v(" Типы значений параметров")]),a._v(" "),s("p",[a._v("В зависимости от собственного типа параметры могут ожидать один из следующих типов значений:")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("Тип")]),a._v(" "),s("th",[a._v("Описание")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("String")]),a._v(" "),s("td",[a._v("Простое строковое значение, например: "),s("code",[a._v("LoremIpsum")]),a._v(". Не забудьте заключить строку в двойные кавычки, если она содержит пробелы, например: "),s("code",[a._v('"Lorem ipsum dolor sit amet."')]),a._v(".")])]),a._v(" "),s("tr",[s("td",[a._v("Integer")]),a._v(" "),s("td",[a._v("Число без дробей; целочисленное значение, например: "),s("code",[a._v("1")]),a._v(", "),s("code",[a._v("150")]),a._v(", "),s("code",[a._v("-25")]),a._v(".")])]),a._v(" "),s("tr",[s("td",[a._v("Decimal")]),a._v(" "),s("td",[a._v("Десятичное число с дробью, отделённой точкой, например: "),s("code",[a._v("1.0")]),a._v(", "),s("code",[a._v("12.08")]),a._v(", "),s("code",[a._v("-0.005")]),a._v(".")])]),a._v(" "),s("tr",[s("td",[a._v("Boolean")]),a._v(" "),s("td",[a._v("Имеет два доступных значения: "),s("code",[a._v("true")]),a._v(" or "),s("code",[a._v("false")]),a._v(" (нечуствительна к регистру).")])]),a._v(" "),s("tr",[s("td",[a._v("Named<>")]),a._v(" "),s("td",[a._v("Строка имени, связанная со значением одного из вышеперечисленных типов. Часть имени отделена точкой. Например, для "),s("em",[a._v("Named<Integer>")]),a._v(": "),s("code",[a._v("foo.8")]),a._v(", "),s("code",[a._v("bar.-20")]),a._v(".")])]),a._v(" "),s("tr",[s("td",[a._v("List<>")]),a._v(" "),s("td",[a._v("Список из значений одного из вышеперечисленных типов, разделённых точками. Например, для "),s("em",[a._v("List<String>")]),a._v(": "),s("code",[a._v('foo,bar,"Lorem ipsum."')]),a._v(", для "),s("em",[a._v("List<Decimal>")]),a._v(": "),s("code",[a._v("12,-8,0.105,2")])])])])]),a._v(" "),s("h3",{attrs:{id:"безымянные-параметры"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#безымянные-параметры"}},[a._v("#")]),a._v(" Безымянные параметры")]),a._v(" "),s("p",[a._v("Большинство команд имеют безымянный параметр. Параметр считается безымянным, если может быть использован без указания его имени.")]),a._v(" "),s("p",[a._v("Например, команда "),s("a",{attrs:{href:"/api/#bgm",target:"_blank"}},[s("code",[a._v("@bgm")])]),a._v(" ожидает безымянный параметр, указывающий имя музыкального трека, который нужно проиграть:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("PianoTheme")])])]),a._v("\n")])])]),s("p",[a._v('"PianoTheme" здесь – это значение типа '),s("em",[a._v("String")]),a._v(' параметра "BgmPath".')]),a._v(" "),s("p",[a._v("В каждой команде может быть только один безымянный параметр, и он всегда должен указываться перед любыми другими параметрами.")]),a._v(" "),s("h3",{attrs:{id:"опционаnьные-и-обязатеnьные-параметры"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#опционаnьные-и-обязатеnьные-параметры"}},[a._v("#")]),a._v(" Опциональные и обязательные параметры")]),a._v(" "),s("p",[a._v("Большинство параметров команды являются "),s("em",[a._v("опциональными")]),a._v(". Это означает, что они либо имеют предопределенное значение, либо просто не требуют никакого значения для выполнения команды. Например, если команда "),s("a",{attrs:{href:"/api/#resettext",target:"_blank"}},[s("code",[a._v("@resetText")])]),a._v(" используется без указания каких-либо параметров, она сбросит текст в принтере по умолчанию, но вы также можете установить определенный ID принтера следующим образом: "),s("code",[a._v("@resetText printer:Dialogue")]),a._v(".")]),a._v(" "),s("p",[a._v("Однако некоторые параметры являются "),s("em",[a._v("обязательными")]),a._v(" для выполнения команды и всегда должны быть указаны.")]),a._v(" "),s("h3",{attrs:{id:"справочик-команд-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#справочик-команд-api"}},[a._v("#")]),a._v(" Справочик команд API")]),a._v(" "),s("p",[a._v("Для списка всех доступных сейчас команд с описанием, параметрами и примерами использования см. "),s("RouterLink",{attrs:{to:"/ru/api/"}},[a._v("справочник команд API")]),a._v(".")],1),a._v(" "),s("h2",{attrs:{id:"универсаnьные-текстовые-строки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#универсаnьные-текстовые-строки"}},[a._v("#")]),a._v(" Универсальные текстовые строки")]),a._v(" "),s("p",[a._v("Чтобы сделать написание скриптов с большим объемом текста более удобным, используются универсальные текстовые строки. Строка считается универсальным текстовым оператором, если она не начинается ни с одного из вышеуказанных литералов операторов:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit.")]),a._v("\n")])])]),s("p",[a._v("ID говорящего можно указать в начале универсальной текстовой строки, отделив их двоеточием ("),s("code",[a._v(":")]),a._v("), чтобы связать печатный текст с "),s("RouterLink",{attrs:{to:"/ru/guide/characters.html"}},[a._v("актором персонажа")]),a._v(":")],1),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Felix: Lorem ipsum dolor sit amet, consectetur adipiscing elit.")]),a._v("\n")])])]),s("p",[a._v("Чтобы сэкономить время и текст при постоянном изменении внешности персонажей, связанных с печатным текстом, вы также можете указать внешность после ID персонажа:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Felix.Happy: Lorem ipsum dolor sit amet.")]),a._v("\n")])])]),s("p",[a._v("Строка выше аналогична следующим двум:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@char")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Felix.Happy")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" wait:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Felix: Lorem ipsum dolor sit amet.")]),a._v("\n")])])]),s("h3",{attrs:{id:"встраивание-команд"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#встраивание-команд"}},[a._v("#")]),a._v(" Встраивание команд")]),a._v(" "),s("p",[a._v("Иногда вам может потребоваться выполнить команду во время отображения (печати) текстового сообщения, сразу после или перед определенным символом. Например, актор изменил бы свою внешность (выражение) при выведении определенного слова; или воспроизведение определенного звукового эффекта в ответ на какое-то событие, описанное в середине печатного сообщения. Функция встраивания команд позволяет обрабатывать подобные ситуации.")]),a._v(" "),s("p",[a._v("Все команды, (как "),s("RouterLink",{attrs:{to:"/ru/api/"}},[a._v("встроенные")]),a._v(" и "),s("RouterLink",{attrs:{to:"/ru/guide/custom-commands.html"}},[a._v("пользовательские")]),a._v(") могут быть встроены в универсальные текстовые строки с использованием квадратных скобок ("),s("code",[a._v("[")]),a._v(","),s("code",[a._v("]")]),a._v("):")],1),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Felix: Lorem ipsum"),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("char")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Felix.Happy")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("pos:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("0.75 ")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("wait:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" dolor sit amet, consectetur adipiscing elit."),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("i")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" Aenean tempus eleifend ante, ac molestie metus condimentum quis."),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("i")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("br")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" Morbi nunc magna, consequat posuere consectetur in, dapibus consectetur lorem. Duis consectetur semper augue nec pharetra.")]),a._v("\n")])])]),s("p",[a._v("Обратите внимание, что синтаксис встроенной команды остаётся точно таким же, за исключением того, что литерал "),s("code",[a._v("@")]),a._v(" опущен, а тело команды заключено в квадратные скобки. Вы можете взять любую командную строку, встроить ее в общую текстовую строку, и она будет иметь точно такой же эффект, но в другой момент, в зависимости от позиции внутри текстового сообщения.")]),a._v(" "),s("p",[a._v("Под капотом универсальные текстовые строки разбираются на отдельные команды, идентифицируемые встроенным индексом; текст печатается с помощью команды "),s("a",{attrs:{href:"/ru/api/#print",target:"_blank"}},[s("code",[a._v("@print")])]),a._v(". Например, следующая универсальная текстовая строка в скрипте Naninovel:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Lorem ipsum"),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("char")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Felix.Happy")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("pos:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("75 ")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("wait:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v(" dolor sit amet.")]),a._v("\n")])])]),s("p",[a._v("— в действительности обрабатывается движком как последовательность отдельных команд:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@print")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Lorem ipsum"')]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" waitInput:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@char")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Felix.Happy")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" pos:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("75")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" wait:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("false")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@print")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"dolor sit amet."')])])]),a._v("\n")])])]),s("p",[a._v("Чтобы напечатать квадратные скобки через универсальную текстовую строку, экранируйте их с помощью обратного слэша, например:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Some text "),s("span",{pre:!0,attrs:{class:"token escaped-char"}},[a._v("\\[")]),a._v(" text inside brackets "),s("span",{pre:!0,attrs:{class:"token escaped-char"}},[a._v("\\]")])]),a._v("\n")])])]),s("p",[a._v('— напечатает "Some text [ text inside brackets ]" в игре.')]),a._v(" "),s("h2",{attrs:{id:"строки-метки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#строки-метки"}},[a._v("#")]),a._v(" Строки-метки")]),a._v(" "),s("p",[a._v('Метки используются в качестве "якорей" при навигации по сценариям Naninovel с помощью команд '),s("a",{attrs:{href:"/ru/api/#goto",target:"_blank"}},[s("code",[a._v("@goto")])]),a._v(". Чтобы объявить метку, используйте литерал "),s("code",[a._v("#")]),a._v(" в начале строки, за которым следует имя метки:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# Epilogue")]),a._v("\n")])])]),s("p",[a._v("Теперь можно использовать команду "),s("a",{attrs:{href:"/ru/api/#goto",target:"_blank"}},[s("code",[a._v("@goto")])]),a._v(', чтобы "прыгнуть" к этой строке:')]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ScriptName.Epilogue")])])]),a._v("\n")])])]),s("p",[a._v("В случае, если вы используете команду "),s("a",{attrs:{href:"/ru/api/#goto",target:"_blank"}},[s("code",[a._v("@goto")])]),a._v(" из того же сценария, в котором находится искомая метка, вы можете опустить имя сценария:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Epilogue")])])]),a._v("\n")])])]),s("h2",{attrs:{id:"строки-комментарии"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#строки-комментарии"}},[a._v("#")]),a._v(" Строки-комментарии")]),a._v(" "),s("p",[a._v("Когда строка начинается с литерала точки с запятой ("),s("code",[a._v(";")]),a._v("), она считается оператором комментария. Строки комментариев полностью игнорируются движком при выполнении сценариев. Вы можете использовать строки комментариев для добавления заметок или аннотаций для себя или других членов команды, работающих со сценариями Naninovel.")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Следующая команда выполнит автосохранение игры.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@save")])]),a._v("\n")])])]),s("h2",{attrs:{id:"усnовия-испоnнения"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#усnовия-испоnнения"}},[a._v("#")]),a._v(" Условия исполнения")]),a._v(" "),s("p",[a._v("Хотя сценарий по умолчанию выполняется линейно, вы можете ввести ветвление, используя параметры "),s("code",[a._v("if")]),a._v(", поддерживаемые всеми командами.")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Если значение `level` – это номер, и он больше 9000, добавить выбор.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"It\'s over 9000!"')]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("level>9000")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Ессли переменная `dead` – булева и имеет значение `false`, выполнить команду вывода текста.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@print")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" text:")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"I\'m still alive."')]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("!dead")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Если переменная `glitch`– булева и имеет значение `true`, или функция вывода случайного числа в диапазоне от 1 до 10 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; возвращает 5 или больше, выполнить команду `@spawn`.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@spawn")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("GlitchCamera")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"glitch || Random(1, 10) >= 5"')])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Если `score` имеет значение от 7 до 13, или переменная `lucky`– булева ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; и возвращает `true`, загрузить скрипт `LuckyEnd`.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("LuckyEnd")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"(score >= 7 && score <= 13) || lucky"')])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Вы также можете использовать условия во встроенных командах.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Lorem sit amet. "),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("style")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("bold")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v("if:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("score>=10")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v("Consectetur elit."),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("style")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])])]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Если в самом выражении используются двойные кавычки, ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; не забывайте дважды экранировать их.")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@print")]),s("span",{pre:!0,attrs:{class:"token whitespaces"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token expression selector"}},[a._v("{remark}")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" if:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("remark==")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Saying \\\\"')]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Stop ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("the")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('car\\\\"')]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("was")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("a")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v('mistake."')])])]),a._v("\n")])])]),s("p",[a._v("Также возможно указывать многострочные условные блоки с помощью команд "),s("a",{attrs:{href:"/ru/api/#if",target:"_blank"}},[s("code",[a._v("@if")])]),a._v(", "),s("a",{attrs:{href:"/ru/api/#else",target:"_blank"}},[s("code",[a._v("@else")])]),a._v(", "),s("a",{attrs:{href:"/ru/api/#elseif",target:"_blank"}},[s("code",[a._v("@elseif")])]),a._v(" и "),s("a",{attrs:{href:"/ru/api/#endif",target:"_blank"}},[s("code",[a._v("@endif")])]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@if")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("score>10")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\tGood job, you've passed the test!")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@bgm")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Victory")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@spawn")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Fireworks")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@elseif")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("attempts>100")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\tYou're hopeless... Need help?")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Yeah, please!"')]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".GetHelp")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"I\'ll keep trying."')]),s("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".BeginTest")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stop")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@else")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\tYou've failed. Try again!")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("\t")]),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),s("span",{pre:!0,attrs:{class:"token command-params"}},[s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".BeginTest")])])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command function"}},[s("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@endif")])]),a._v("\n")])])]),s("p",[a._v("Обратите внимание, что табуляции полностью опциональны и используются здесь только для лучшей читаемости.")]),a._v(" "),s("p",[a._v("То же самое работает и для универсальных текстовых строк:")]),a._v(" "),s("div",{staticClass:"language-nani extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nani"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Lorem ipsum dolor sit amet. "),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("if")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),s("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("score>10")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v("Duis efficitur imperdiet nunc. "),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("else")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])]),a._v("Vestibulum sit amet dolor non dolor placerat vehicula."),s("span",{pre:!0,attrs:{class:"token inline-command function"}},[s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("endif")]),s("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])])]),a._v("\n")])])]),s("p",[a._v("Для дополнительной информации о форматах условных выражений и доступных операторах см. гайд по "),s("RouterLink",{attrs:{to:"/ru/guide/script-expressions.html"}},[a._v("выражениям сценариев")]),a._v(".")],1),a._v(" "),s("h2",{attrs:{id:"визуаnьный-редактор"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#визуаnьный-редактор"}},[a._v("#")]),a._v(" Визуальный редактор")]),a._v(" "),s("p",[a._v("Вы можете использовать визуальный редактор сценариев для редактирования сценариев Naninovel. Выберите ресурс сценария, и вы увидите, что визуальный редактор автоматически откроется в окне инспектора.")]),a._v(" "),s("p",[s("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[s("source",{attrs:{src:"https://i.gyazo.com/ba57b9f78116e57408125325bdf66be9.mp4",type:"video/mp4"}})])]),a._v(" "),s("p",[a._v("Чтобы добавить новую строку в сценарий, щелкните правой кнопкой мыши в месте, куда вы хотите вставить строку, или же нажмите "),s("code",[a._v("Ctrl+Space")]),a._v(' (вы можете изменить привязки клавиш по умолчанию в меню конфигурации ввода) и выберите нужную строку или тип команды. Чтобы изменить порядок строк, перетащите их за номерные метки. Чтобы удалить строку, щелкните ее правой кнопкой мыши и выберите пункт "Удалить".')]),a._v(" "),s("p",[a._v("Когда вы изменили сценарий с помощью визуального редактора, вы увидите звездочку ("),s("code",[a._v("*")]),a._v(") над именем сценария в заголовке инспектора. Это означает, что ассет был изменён и должен быть сохранен; нажмите "),s("code",[a._v("Ctrl+S")]),a._v(", чтобы сохранить ассет. Если вы попытаетесь выбрать другой ассет после изменения сценария, появится диалоговое окно, позволяющее либо сохранить, либо отменить изменения.")]),a._v(" "),s("p",[a._v("Визуальный редактор автоматически синхронизирует отредактированный сценарий, если вы обновите его внешне, так что вы можете легко работать со сценариями как в текстовых, так и в визуальных редакторах. В случае, если автосинхронизация не работает, убедитесь, что функция "),s("code",[a._v("Auto Refresh")]),a._v(" включена в меню редактора Unity "),s("code",[a._v("Edit -> Preferences -> General")]),a._v(".")]),a._v(" "),s("p",[a._v("В режиме воспроизведения вы можете использовать визуальный редактор, чтобы отслеживать, какая строка сценария воспроизводится в данный момент, и щелкнуть правой кнопкой мыши строку, чтобы перемотать сценарий назад. Эта функция требует, чтобы сценарий имел одинаковый ID ресурса (при назначении в меню менеджера ресурсов) и имя ассета.")]),a._v(" "),s("p",[s("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[s("source",{attrs:{src:"https://i.gyazo.com/b6e04d664ce4b513296b378b7c25be03.mp4",type:"video/mp4"}})])]),a._v(" "),s("p",[a._v("Строка, воспроизводимая в настоящее время, будет выделена зеленым цветом; когда воспроизведение скрипта будет остановлено при ожидании ввода пользователем, воспроизводимая строка будет выделена желтым цветом.")]),a._v(" "),s("p",[a._v("Вы можете настроить поведение редактора и внешний вид в меню конфигурации сценариев.")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/4b4b2608e7662b02a61b00734910308c.png",alt:""}})]),a._v(" "),s("p"),s("div",{staticClass:"video-container"},[s("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/9UmccF9R9xI",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),s("p"),a._v(" "),s("h2",{attrs:{id:"схемы-сценариев"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#схемы-сценариев"}},[a._v("#")]),a._v(" Схемы сценариев")]),a._v(" "),s("p",[a._v("При работе с большим количеством сценариев и нелинейных историй, удобным может быть наличие визуального представления развития истории. Здесь вам может пригодиться инструмент сценарных схем.")]),a._v(" "),s("p",[s("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[s("source",{attrs:{src:"https://i.gyazo.com/0dd3ec2393807fb03d501028e1526895.mp4",type:"video/mp4"}})])]),a._v(" "),s("p",[a._v("Чтобы открыть окно схемы, испольуйте меню редактора "),s("code",[a._v("Naninovel -> Script Graph")]),a._v(". Вы можете закрепить это окно как любую другую панель редактора, если хотите.")]),a._v(" "),s("p",[a._v("Инструмент автоматически построит графическое представление всех сценариев Naninovel (в виде узлов), назначенных через ресурсы редактора ("),s("code",[a._v("Naninovel -> Resources -> Scripts")]),a._v("), и связей между ними.")]),a._v(" "),s("p",[a._v("Соединения генерируются на основе команд "),s("a",{attrs:{href:"/ru/api/#goto",target:"_blank"}},[s("code",[a._v("@goto")])]),a._v(" и "),s("a",{attrs:{href:"/ru/api/#gosub",target:"_blank"}},[s("code",[a._v("@gosub")])]),a._v(". Если команде назначено условное выражение (параметр "),s("code",[a._v("if")]),a._v("), соответствующий порт в узле будет выделен желтым цветом, и вы сможете увидеть выражение при наведении курсора на порт.")]),a._v(" "),s("p",[a._v("Вы можете выбрать ассет сценария и открыть визуальный редактор, дважды щелкнув по узлу или порту. Щелчок по портам также приведет к прокрутке визуального редактора до строки, содержащей метку (в случае, если была указана метка).")]),a._v(" "),s("p",[a._v('Вы можете изменять положение узлов по своему усмотрению, и их позиции будут автоматически сохранены при закрытии окна схемы или выходе из Unity; затем позиции будут восстановлены при повторном открытии окна. Вы также можете сохранить положения вручную, нажав кнопку "Save". Нажатие кнопки "Auto Align" приведет к сбросу всех позиций.')]),a._v(" "),s("p",[a._v('При изменении сценариев или добавлении новых нажмите кнопку "Rebuild Graph", чтобы синхронизировать изменения.')]),a._v(" "),s("h2",{attrs:{id:"горячая-перезагрузка"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#горячая-перезагрузка"}},[a._v("#")]),a._v(" Горячая перезагрузка")]),a._v(" "),s("p",[a._v("Можно редактировать сценарии в режиме воспроизведения (как с помощью визуальных, так и внешних редакторов) и сразу же применять изменения, не перезапуская игру. Эта функция управляется через свойство "),s("code",[a._v("Hot Reload Scripts")]),a._v(" в конфигурации сценариев и включена по умолчанию.")]),a._v(" "),s("p",[a._v("При изменении, добавлении или удалении строки перед воспроизводимой в данный момент, откат состояния автоматически произойдет с измененной строкой, чтобы предотвратить несоответствие состояния.")]),a._v(" "),s("p",[a._v("В случае, если горячая перезагрузка не работает, убедитесь, что включено свойство "),s("code",[a._v("Auto Refresh")]),a._v(", а "),s("code",[a._v("Script Changes While Playing")]),a._v(" установлено на "),s("code",[a._v("Recompile And Continue Playing")]),a._v(". Оба свойства можно найти в меню редактора Unity "),s("code",[a._v("Edit -> Preferences -> General")]),a._v(".")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/5d433783e1a12531c79fe6be80c92da7.png",alt:""}})]),a._v(" "),s("p",[a._v("Чтобы вручную инициировать горячую перезагрузку текущего сценария Naninovel (например, при редактировании файла скрипта вне проекта Unity), используйте "),s("RouterLink",{attrs:{to:"/ru/guide/development-console.html"}},[a._v("консольную команду")]),a._v(" "),s("code",[a._v("reload")]),a._v(". Команда предназначена только для редактора (не будет работать в сборках).")],1),a._v(" "),s("h2",{attrs:{id:"поддержка-ide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#поддержка-ide"}},[a._v("#")]),a._v(" Поддержка IDE")]),a._v(" "),s("p",[a._v("Такие функции IDE, как подсветка синтаксиса, проверка ошибок, автозавершение и интерактивная документация, могут значительно повысить производительность при написании сценариев. Мы сделали расширение для бесплатного open-source "),s("a",{attrs:{href:"https://code.visualstudio.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("VS Code"),s("OutboundLink")],1),a._v(" (доступен для Windows, MacOS и Linux), которое обеспечивает существенную поддержку IDE для синтаксиса NaniScript.")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/b1f5c6845c04d1b18b2196aa29ea6c19.png",alt:""}})]),a._v(" "),s("p",[a._v("Посмотрите следующий видеогайд по активации и использованию расширения.")]),a._v(" "),s("p"),s("div",{staticClass:"video-container"},[s("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/y87wd5jHfFw",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),s("p"),a._v(" "),s("p",[a._v("Поддержка других редакторов возможна в будущем; проверьте "),s("a",{attrs:{href:"https://github.com/Naninovel/Documentation/issues/56#issuecomment-492987029",target:"_blank",rel:"noopener noreferrer"}},[a._v("тему на GitHub"),s("OutboundLink")],1),a._v(" для получения дополнительной информации.")]),a._v(" "),s("h2",{attrs:{id:"отnадка-сценариев"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#отnадка-сценариев"}},[a._v("#")]),a._v(" Отладка сценариев")]),a._v(" "),s("p",[a._v("При работе с большими сценариями Naninovel может стать утомительным всегда воспроизводить их с самого начала, чтобы проверить, как все работает в определенных частях скрипта.")]),a._v(" "),s("p",[a._v("С помощью "),s("RouterLink",{attrs:{to:"/ru/guide/development-console.html"}},[a._v("консоли разработчика")]),a._v(' вы можете мгновенно "перемотать" воспроизводимый в данный момент сценарий на произвольную строку:')],1),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("rewind 12\n")])])]),s("p",[a._v("— начнёт воспроизведение текущего скрипта с 12-й строки; вы можете перемотать его вперед и назад таким же образом. Чтобы открыть консоль во время работы игры, убедитесь, что консоль включена в конфигурации движка, и нажмите клавишу "),s("code",[a._v("~")]),a._v(" (может быть изменена в конфигурации) или выполните мультитач (3 или более одновременных касаний) в случае, если сборка проигрывается на устройстве с сенсорным экраном.")]),a._v(" "),s("p",[a._v("Чтобы узнать, какой сценарий и какая строка воспроизводятся в данный момент, используйте окно отладки: введите "),s("code",[a._v("debug")]),a._v(" в консоли разработки и нажмите "),s("code",[a._v("Enter")]),a._v(", чтобы открыть окно.")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/12772ecc7c14011bcde4a74c81e997b8.png",alt:"Отладка сценариев"}})]),a._v(" "),s("p",[a._v('В заголовке окна отображаются имя текущего воспроизводимого сценария, номер строки и индекс команды. Если включена функция [автоозвучивания](/ru/guide/voicing.md#автоматическое озвучивание), то также будет отображаться имя соответствующего голосового клипа. Вы можете изменить положение окна, перетащив его по заголовку. Кнопка "Stop" остановит выполнение скрипта; когда проигрыватель скриптов остановлен, кнопка "Play" возобновит выполнение. Вы можете закрыть окно отладки, нажав кнопку "Close".')]),a._v(" "),s("p",[a._v("Окно отладки доступно как в редакторе, так и в сборках.")])])}),[],!1,null,null,null);t.default=r.exports}}]);