(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{507:function(a,t,e){"use strict";e.r(t);var s=e(42),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择"}},[a._v("#")]),a._v(" 选择")]),a._v(" "),e("p",[a._v("该功能允许向用户呈现许多选择，并根据用户做出的选择重新规划脚本执行流程。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/023502e43b35caa706c88fd9ab32003d.png",alt:"Choices"}})]),a._v(" "),e("p",[a._v("在naninovel脚本中使用 "),e("a",{attrs:{href:"/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v(" 命令，后跟选择摘要和（可选）goto路径，以添加选择：")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Print the text, then immediately show choices and stop script execution.")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Continue executing this script or load another?"),e("span",{pre:!0,attrs:{class:"token inline-command function"}},[e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token command-param-name name"}},[a._v("skipInput")]),e("span",{pre:!0,attrs:{class:"token start-stop-char"}},[a._v("]")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Continue from the next line"')])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Continue from the specified label"')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Labelname")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Load another from start"')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("AnotherScript")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Load another from label"')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("AnotherScript.LabelName")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stop")])]),a._v("\n")])])]),e("p",[a._v("该 "),e("code",[a._v("goto")]),a._v(" 参数的值是用户选择相应选项时要导航至的路径。它以以下格式指定："),e("em",[a._v("ScriptName")]),a._v("."),e("em",[a._v("LabelName")]),a._v("。如果省略标签名称，则将从头开始执行提供的脚本。当省略脚本名称时，将引用当前执行的脚本中的标签：")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Loads and starts playing a naninovel script with the name `Script001` from the start")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("goto:Script001")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Save as above, but start playing from the label `AfterStorm`")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("goto:Script001.AfterStorm")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("; Jumps the playback to the label `Epilogue` in the currently played script")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("goto:.Epilogue")]),a._v("\n")])])]),e("p",[a._v("如果 "),e("code",[a._v("goto")]),a._v(" 未指定参数，则当前脚本将从下一行继续执行。")]),a._v(" "),e("p",[a._v("选择处理器元素用于处理 "),e("a",{attrs:{href:"/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v("命令。可以使用可通过"),e("code",[a._v("Naninovel -> Resources -> Choice Handlers")]),a._v(" 菜单访问的选择管理器来添加，编辑和删除选择处理器。")]),a._v(" "),e("p",[a._v("可以使用 "),e("code",[a._v("Naninovel -> Configuration -> Choice Handlers")]),a._v(" 菜单配置选择处理程序的行为。有关可用选项的信息，请参阅 "),e("RouterLink",{attrs:{to:"/zh/guide/configuration.html#选择处理器"}},[a._v("属性配置")]),a._v(" 。")],1),a._v(" "),e("h2",{attrs:{id:"选择按钮"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择按钮"}},[a._v("#")]),a._v(" 选择按钮")]),a._v(" "),e("p",[e("a",{attrs:{href:"/zh/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v(" 命令有一个可选参数 "),e("code",[a._v("button")]),a._v(" 用于指定表示选项时使用的预制体的路径（相对于“ Resources”文件夹）。")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" handler:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ButtonArea")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" button:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("MapButtons/Home")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" pos:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("-300,-300")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".HomeScene")])])]),a._v("\n")])])]),e("p",[a._v("— 这里我们使用一个支持定位的选择处理器，在地图的上点位表示相应选择， "),e("code",[a._v("button")]),a._v(" 参数设置为地图上的一个图像。该预制体存储于 "),e("code",[a._v("Assets/Resources/MapButtons/Home.prefab")]),a._v("。")]),a._v(" "),e("p",[a._v("要从模板创建选择按钮预制，请使用 "),e("code",[a._v("Create -> Naninovel -> Choice Button")]),a._v(" 菜单。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/c2bd4abaa0275f7cdd37c56fd2ff0dec.png",alt:""}})]),a._v(" "),e("p",[a._v("请记住，将"),e("strong",[a._v("自定义选择按钮存储在“资源”文件夹")]),a._v("中，否则当请求时它们将无法加载。")]),a._v(" "),e("p",[a._v("如果未指定命令 "),e("code",[a._v("button")]),a._v(" 参数， "),e("a",{attrs:{href:"/zh/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v(" 则使用默认按钮预制。")]),a._v(" "),e("p",[a._v("要为选择文本使用其他（例如TMPro）文本组件，请使用选择按钮组件的 "),e("code",[a._v("On Summary Text Changed")]),a._v(" "),e("a",{attrs:{href:"https://docs.unity3d.com/Manual/UnityEvents",target:"_blank",rel:"noopener noreferrer"}},[a._v("Unity事件"),e("OutboundLink")],1),a._v(" 。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://i.gyazo.com/8810c51b336bfd653efcde591fe1c41f.png",alt:""}})]),a._v(" "),e("h2",{attrs:{id:"按钮列表选择处理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#按钮列表选择处理器"}},[a._v("#")]),a._v(" 按钮列表选择处理器")]),a._v(" "),e("p",[a._v("默认情况下使用按钮列表处理程序。它将选择按钮存储在水平布局面板中，并忽略 "),e("a",{attrs:{href:"/zh/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v(" 命令的 "),e("code",[a._v("pos")]),a._v(" 参数。")]),a._v(" "),e("h2",{attrs:{id:"按钮区域选择处理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#按钮区域选择处理器"}},[a._v("#")]),a._v(" 按钮区域选择处理器")]),a._v(" "),e("p",[a._v("与按钮列表相比，按钮区域不套用任何特定的布局，而是允许通过 "),e("code",[a._v("pos")]),a._v(" 参数手动设置添加的选择按钮的位置。例如，以下为一种使用选择命令和按钮区域处理器制作交互式地图的方法：")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# Map")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@back")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Map")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@hidePrinter")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" handler:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ButtonArea")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" button:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("MapButtons/Home")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" pos:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("-300,-300")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".HomeScene")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" handler:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("ButtonArea")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" button:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("MapButtons/Shop")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" pos:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("300,200")]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" goto:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".ShopScene")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@stop")])]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# HomeScene")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@back")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Home")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Home, sweet home!")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Map")])])]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token label regex"}},[a._v("# ShopScene")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@back")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("Shop")])])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token generic-text punctuation"}},[a._v("Don't forget about cucumbers!")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@goto")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(".Map")])])]),a._v("\n")])])]),e("p"),e("div",{staticClass:"video-container"},[e("iframe",{attrs:{src:"https://www.youtube-nocookie.com/embed/cNRNgk5HhKQ",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),e("p"),a._v(" "),e("h2",{attrs:{id:"添加自定义选择处理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加自定义选择处理器"}},[a._v("#")]),a._v(" 添加自定义选择处理器")]),a._v(" "),e("p",[a._v("您可以基于内置模板添加自定义选择处理程序，也可以从头开始创建新的处理程序。例如，现在自定义内置 "),e("code",[a._v("ButtonArea")]),a._v(" 模板。")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("Create -> Naninovel -> Choice Handler -> ButtonArea")]),a._v(" 菜单在Naninovel包之外的某个位置（例如在Assets/ChoiceHandlers文件夹中）创建一个按钮区域处理预制体。")]),a._v(" "),e("p",[a._v("编辑处理程序：更改字体，纹理，添加动画等。有关可用UI构建工具的更多信息，请查看"),e("a",{attrs:{href:"https://docs.unity3d.com/Packages/com.unity.ugui@latest",target:"_blank",rel:"noopener noreferrer"}},[a._v("Unity文档"),e("OutboundLink")],1),a._v(" 。")]),a._v(" "),e("p",[a._v("通过Naninovel -> Resources -> Choice Handlers菜单，用选择处理程序管理器GUI将选择处理程序公开给引擎资源。使用 "),e("code",[a._v("+")]),a._v(" （加号）按钮添加新记录，输入元素 ID（可以与预制名称不同），然后双击记录以打开设置。拖放处理程序预制到 "),e("code",[a._v("Resource")]),a._v(" 区域。如下图所示：")]),a._v(" "),e("p",[e("video",{staticClass:"video",attrs:{loop:"",autoplay:"",muted:""},domProps:{muted:!0}},[e("source",{attrs:{src:"https://i.gyazo.com/cb3a0ff7f22b22cec6546acb388719fc.mp4",type:"video/mp4"}})])]),a._v(" "),e("p",[a._v("现在，可以在 "),e("a",{attrs:{href:"/zh/api/#choice",target:"_blank"}},[e("code",[a._v("@choice")])]),a._v(" 命令的"),e("code",[a._v("handler")]),a._v(" 参数中指定新的选择处理程序的ID来使用它。")]),a._v(" "),e("div",{staticClass:"language-nani extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nani"}},[e("code",[e("span",{pre:!0,attrs:{class:"token command function"}},[e("span",{pre:!0,attrs:{class:"token command-name"}},[a._v("@choice")]),e("span",{pre:!0,attrs:{class:"token command-params"}},[e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v(" ")]),e("span",{pre:!0,attrs:{class:"token quoted-string operator"}},[a._v('"Choice summary text."')]),e("span",{pre:!0,attrs:{class:"token command-param-id property"}},[a._v(" handler:")]),e("span",{pre:!0,attrs:{class:"token command-param-value operator"}},[a._v("MyNewHandler")])])]),a._v("\n")])])]),e("p",[a._v("也可以通过手动实现 "),e("code",[a._v("IChoiceHandlerActor")]),a._v(" 接口从头创建选择处理程序。有关更多信息，请参见有关"),e("RouterLink",{attrs:{to:"/zh/guide/custom-actor-implementations.html"}},[a._v("自定义元素实现")]),a._v(" 。")],1)])}),[],!1,null,null,null);t.default=n.exports}}]);