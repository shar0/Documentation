<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Сценарии Naninovel | Naninovel</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/assets/img/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Расширение игрового движка Unity для создания визуальных новелл.">
    <meta name="theme-color" content="#4985c2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="og:image" content="/assets/img/og.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="msapplication-TileImage" content="/assets/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="google-site-verification" content="cdvgJ2XFFbaGErDKJtTbFj9u9frfReZ9rzUnsf9F6nI">
    <link rel="preload" href="/assets/css/0.styles.49cf1a7f.css" as="style"><link rel="preload" href="/assets/js/app.7081dc02.js" as="script"><link rel="preload" href="/assets/js/3.edd03593.js" as="script"><link rel="preload" href="/assets/js/132.58b3c0d0.js" as="script"><link rel="prefetch" href="/assets/js/10.cd95fe25.js"><link rel="prefetch" href="/assets/js/100.2c7ddd2f.js"><link rel="prefetch" href="/assets/js/101.a4db67f4.js"><link rel="prefetch" href="/assets/js/102.4166bf91.js"><link rel="prefetch" href="/assets/js/103.21881421.js"><link rel="prefetch" href="/assets/js/104.b75a1973.js"><link rel="prefetch" href="/assets/js/105.26100b1a.js"><link rel="prefetch" href="/assets/js/106.09f179d4.js"><link rel="prefetch" href="/assets/js/107.86ac9447.js"><link rel="prefetch" href="/assets/js/108.e7e03b77.js"><link rel="prefetch" href="/assets/js/109.0bd5d496.js"><link rel="prefetch" href="/assets/js/11.d37f9cee.js"><link rel="prefetch" href="/assets/js/110.297115e6.js"><link rel="prefetch" href="/assets/js/111.6067a1c5.js"><link rel="prefetch" href="/assets/js/112.82c7c323.js"><link rel="prefetch" href="/assets/js/113.42ab0da7.js"><link rel="prefetch" href="/assets/js/114.30db486d.js"><link rel="prefetch" href="/assets/js/115.e8a87ca4.js"><link rel="prefetch" href="/assets/js/116.8b36f9d7.js"><link rel="prefetch" href="/assets/js/117.4b8466ef.js"><link rel="prefetch" href="/assets/js/118.2c320ad9.js"><link rel="prefetch" href="/assets/js/119.5feee4d4.js"><link rel="prefetch" href="/assets/js/12.f4e7502c.js"><link rel="prefetch" href="/assets/js/120.aec27d48.js"><link rel="prefetch" href="/assets/js/121.f36d5945.js"><link rel="prefetch" href="/assets/js/122.bfe5fa18.js"><link rel="prefetch" href="/assets/js/123.9a1f01db.js"><link rel="prefetch" href="/assets/js/124.93b8b504.js"><link rel="prefetch" href="/assets/js/125.1a24c7f7.js"><link rel="prefetch" href="/assets/js/126.3df14633.js"><link rel="prefetch" href="/assets/js/127.88a85fdb.js"><link rel="prefetch" href="/assets/js/128.f24e1a5a.js"><link rel="prefetch" href="/assets/js/129.1704f1e4.js"><link rel="prefetch" href="/assets/js/13.f171e693.js"><link rel="prefetch" href="/assets/js/130.e723fa19.js"><link rel="prefetch" href="/assets/js/131.a74e5213.js"><link rel="prefetch" href="/assets/js/133.70140be2.js"><link rel="prefetch" href="/assets/js/134.42d0e126.js"><link rel="prefetch" href="/assets/js/135.56c60d02.js"><link rel="prefetch" href="/assets/js/136.566c686a.js"><link rel="prefetch" href="/assets/js/137.de72f242.js"><link rel="prefetch" href="/assets/js/138.f571a3db.js"><link rel="prefetch" href="/assets/js/139.1ef15cda.js"><link rel="prefetch" href="/assets/js/14.f931064a.js"><link rel="prefetch" href="/assets/js/140.d157478e.js"><link rel="prefetch" href="/assets/js/141.4c8d9a78.js"><link rel="prefetch" href="/assets/js/142.b395f23f.js"><link rel="prefetch" href="/assets/js/143.57253da4.js"><link rel="prefetch" href="/assets/js/144.a79f669d.js"><link rel="prefetch" href="/assets/js/145.c98bb948.js"><link rel="prefetch" href="/assets/js/146.cce44648.js"><link rel="prefetch" href="/assets/js/147.d698b1a3.js"><link rel="prefetch" href="/assets/js/148.e6dc8c8f.js"><link rel="prefetch" href="/assets/js/149.626c8fc9.js"><link rel="prefetch" href="/assets/js/15.de482045.js"><link rel="prefetch" href="/assets/js/150.1081c1df.js"><link rel="prefetch" href="/assets/js/151.c1066d26.js"><link rel="prefetch" href="/assets/js/152.f21c79f5.js"><link rel="prefetch" href="/assets/js/153.3aecb4c5.js"><link rel="prefetch" href="/assets/js/154.0ad8aabe.js"><link rel="prefetch" href="/assets/js/155.a6d436db.js"><link rel="prefetch" href="/assets/js/156.bd838af2.js"><link rel="prefetch" href="/assets/js/157.c2e7cc99.js"><link rel="prefetch" href="/assets/js/158.94a83037.js"><link rel="prefetch" href="/assets/js/159.35c80517.js"><link rel="prefetch" href="/assets/js/16.4a61aaa5.js"><link rel="prefetch" href="/assets/js/160.f0dde746.js"><link rel="prefetch" href="/assets/js/161.fd1960eb.js"><link rel="prefetch" href="/assets/js/162.48c43e18.js"><link rel="prefetch" href="/assets/js/163.ac4c1c77.js"><link rel="prefetch" href="/assets/js/164.2ba45738.js"><link rel="prefetch" href="/assets/js/165.99ec3fcd.js"><link rel="prefetch" href="/assets/js/166.0d0bb46a.js"><link rel="prefetch" href="/assets/js/167.d65ca4e0.js"><link rel="prefetch" href="/assets/js/168.90170b1b.js"><link rel="prefetch" href="/assets/js/169.4f0fdc6d.js"><link rel="prefetch" href="/assets/js/17.47feb5b2.js"><link rel="prefetch" href="/assets/js/170.b4c1b1fa.js"><link rel="prefetch" href="/assets/js/171.f940dbf0.js"><link rel="prefetch" href="/assets/js/172.85a1846c.js"><link rel="prefetch" href="/assets/js/173.e94da458.js"><link rel="prefetch" href="/assets/js/174.b6c38684.js"><link rel="prefetch" href="/assets/js/175.904e3d63.js"><link rel="prefetch" href="/assets/js/176.17e5bbe2.js"><link rel="prefetch" href="/assets/js/177.fce6d338.js"><link rel="prefetch" href="/assets/js/178.56d7e412.js"><link rel="prefetch" href="/assets/js/179.e396556f.js"><link rel="prefetch" href="/assets/js/18.84fcede2.js"><link rel="prefetch" href="/assets/js/180.2723edde.js"><link rel="prefetch" href="/assets/js/181.4ade7a10.js"><link rel="prefetch" href="/assets/js/182.52ff1fb1.js"><link rel="prefetch" href="/assets/js/183.1936260f.js"><link rel="prefetch" href="/assets/js/184.a57b186a.js"><link rel="prefetch" href="/assets/js/185.6c38f1ff.js"><link rel="prefetch" href="/assets/js/186.f93dfad6.js"><link rel="prefetch" href="/assets/js/187.0ece9a85.js"><link rel="prefetch" href="/assets/js/188.914b5ccd.js"><link rel="prefetch" href="/assets/js/189.36406932.js"><link rel="prefetch" href="/assets/js/19.94c6633c.js"><link rel="prefetch" href="/assets/js/190.df0eff6a.js"><link rel="prefetch" href="/assets/js/191.7b418d1b.js"><link rel="prefetch" href="/assets/js/192.a2889015.js"><link rel="prefetch" href="/assets/js/193.59d9f023.js"><link rel="prefetch" href="/assets/js/194.9d2cf696.js"><link rel="prefetch" href="/assets/js/20.b361c982.js"><link rel="prefetch" href="/assets/js/21.fbeb5e4e.js"><link rel="prefetch" href="/assets/js/22.035ed34b.js"><link rel="prefetch" href="/assets/js/23.8e154398.js"><link rel="prefetch" href="/assets/js/24.dd8c2e89.js"><link rel="prefetch" href="/assets/js/25.fc4923f8.js"><link rel="prefetch" href="/assets/js/26.a051961d.js"><link rel="prefetch" href="/assets/js/27.b16b7222.js"><link rel="prefetch" href="/assets/js/28.010479cf.js"><link rel="prefetch" href="/assets/js/29.4bc7729a.js"><link rel="prefetch" href="/assets/js/30.410b24cb.js"><link rel="prefetch" href="/assets/js/31.1abb1e1f.js"><link rel="prefetch" href="/assets/js/32.d1755f23.js"><link rel="prefetch" href="/assets/js/33.cbe2bf9d.js"><link rel="prefetch" href="/assets/js/34.44d85336.js"><link rel="prefetch" href="/assets/js/35.bb079774.js"><link rel="prefetch" href="/assets/js/36.6230ee26.js"><link rel="prefetch" href="/assets/js/37.95eb1651.js"><link rel="prefetch" href="/assets/js/38.04f5ff22.js"><link rel="prefetch" href="/assets/js/39.38371b0a.js"><link rel="prefetch" href="/assets/js/4.d5ff7d0b.js"><link rel="prefetch" href="/assets/js/40.ed81c668.js"><link rel="prefetch" href="/assets/js/41.e9153ab9.js"><link rel="prefetch" href="/assets/js/42.142a5474.js"><link rel="prefetch" href="/assets/js/43.e3a084ff.js"><link rel="prefetch" href="/assets/js/44.aaff5b82.js"><link rel="prefetch" href="/assets/js/45.bffb1bc5.js"><link rel="prefetch" href="/assets/js/46.a66a4ccd.js"><link rel="prefetch" href="/assets/js/47.37305927.js"><link rel="prefetch" href="/assets/js/48.38e51140.js"><link rel="prefetch" href="/assets/js/49.3f4b4630.js"><link rel="prefetch" href="/assets/js/5.cc4f52e2.js"><link rel="prefetch" href="/assets/js/50.2bf7d76c.js"><link rel="prefetch" href="/assets/js/51.08e255f2.js"><link rel="prefetch" href="/assets/js/52.2f825b99.js"><link rel="prefetch" href="/assets/js/53.6a5dc2fe.js"><link rel="prefetch" href="/assets/js/54.2dc58e9d.js"><link rel="prefetch" href="/assets/js/55.a651187d.js"><link rel="prefetch" href="/assets/js/56.179f3458.js"><link rel="prefetch" href="/assets/js/57.91ea4a4b.js"><link rel="prefetch" href="/assets/js/58.2e2c62e2.js"><link rel="prefetch" href="/assets/js/59.01cf7af1.js"><link rel="prefetch" href="/assets/js/6.489b006c.js"><link rel="prefetch" href="/assets/js/60.d296c4fc.js"><link rel="prefetch" href="/assets/js/61.39781dbb.js"><link rel="prefetch" href="/assets/js/62.bc6bc6e3.js"><link rel="prefetch" href="/assets/js/63.a6aa9d74.js"><link rel="prefetch" href="/assets/js/64.6d9071a1.js"><link rel="prefetch" href="/assets/js/65.1dca386a.js"><link rel="prefetch" href="/assets/js/66.f4bc0f8e.js"><link rel="prefetch" href="/assets/js/67.cc916dec.js"><link rel="prefetch" href="/assets/js/68.27ef429f.js"><link rel="prefetch" href="/assets/js/69.dc351f8f.js"><link rel="prefetch" href="/assets/js/7.fa0f1f92.js"><link rel="prefetch" href="/assets/js/70.96c733de.js"><link rel="prefetch" href="/assets/js/71.e43f4331.js"><link rel="prefetch" href="/assets/js/72.92345389.js"><link rel="prefetch" href="/assets/js/73.6ac6a7a5.js"><link rel="prefetch" href="/assets/js/74.f522ba33.js"><link rel="prefetch" href="/assets/js/75.01680947.js"><link rel="prefetch" href="/assets/js/76.7c8e6a97.js"><link rel="prefetch" href="/assets/js/77.3e704644.js"><link rel="prefetch" href="/assets/js/78.31c3ed37.js"><link rel="prefetch" href="/assets/js/79.86d30626.js"><link rel="prefetch" href="/assets/js/8.8c48d0ee.js"><link rel="prefetch" href="/assets/js/80.bd9861bb.js"><link rel="prefetch" href="/assets/js/81.86b09c72.js"><link rel="prefetch" href="/assets/js/82.4ed5a55d.js"><link rel="prefetch" href="/assets/js/83.f3d8eb1b.js"><link rel="prefetch" href="/assets/js/84.f07238a3.js"><link rel="prefetch" href="/assets/js/85.98270c0d.js"><link rel="prefetch" href="/assets/js/86.aceb70a8.js"><link rel="prefetch" href="/assets/js/87.45c2a264.js"><link rel="prefetch" href="/assets/js/88.006c5bd4.js"><link rel="prefetch" href="/assets/js/89.c31cab13.js"><link rel="prefetch" href="/assets/js/9.8b634c4a.js"><link rel="prefetch" href="/assets/js/90.7b4b1937.js"><link rel="prefetch" href="/assets/js/91.53dda924.js"><link rel="prefetch" href="/assets/js/92.994aabbf.js"><link rel="prefetch" href="/assets/js/93.4d07d347.js"><link rel="prefetch" href="/assets/js/94.a0d7901e.js"><link rel="prefetch" href="/assets/js/95.495740f2.js"><link rel="prefetch" href="/assets/js/96.dbb7e8d8.js"><link rel="prefetch" href="/assets/js/97.3484eb66.js"><link rel="prefetch" href="/assets/js/98.7bee7fab.js"><link rel="prefetch" href="/assets/js/99.2918c452.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.72c12505.js">
    <link rel="stylesheet" href="/assets/css/0.styles.49cf1a7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="https://naninovel.com"><!----> <span class="site-name">Naninovel</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ru/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/ru/guide/" class="nav-link router-link-active">
  Руководство
</a></div><div class="nav-item"><a href="/ru/api/" class="nav-link">
  Команды
</a></div><div class="nav-item"><a href="/ru/support/" class="nav-link">
  Поддержка
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Язык" class="dropdown-title"><span class="title">Язык</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/naninovel-scripts.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/naninovel-scripts.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/naninovel-scripts.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/naninovel-scripts.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ru/faq/" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/ru/guide/" class="nav-link router-link-active">
  Руководство
</a></div><div class="nav-item"><a href="/ru/api/" class="nav-link">
  Команды
</a></div><div class="nav-item"><a href="/ru/support/" class="nav-link">
  Поддержка
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Язык" class="dropdown-title"><span class="title">Язык</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/naninovel-scripts.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/ja/guide/naninovel-scripts.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/naninovel-scripts.html" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/ru/guide/naninovel-scripts.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Руководство</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ru/guide/" aria-current="page" class="sidebar-link">Введение</a></li><li><a href="/ru/guide/compatibility.html" class="sidebar-link">Совместимость</a></li><li><a href="/ru/guide/getting-started.html" class="sidebar-link">Начало работы</a></li><li><a href="/ru/guide/configuration.html" class="sidebar-link">Конфигурация</a></li><li><a href="/ru/guide/naninovel-scripts.html" aria-current="page" class="active sidebar-link">Сценарии Naninovel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#командные-строки" class="sidebar-link">Командные строки</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#универсаnьные-текстовые-строки" class="sidebar-link">Универсальные текстовые строки</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#строки-метки" class="sidebar-link">Строки-метки</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#строки-комментарии" class="sidebar-link">Строки-комментарии</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#усnовия-испоnнения" class="sidebar-link">Условия исполнения</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#визуаnьный-редактор" class="sidebar-link">Визуальный редактор</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#схемы-сценариев" class="sidebar-link">Схемы сценариев</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#горячая-перезагрузка" class="sidebar-link">Горячая перезагрузка</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#поддержка-ide" class="sidebar-link">Поддержка IDE</a></li><li class="sidebar-sub-header"><a href="/ru/guide/naninovel-scripts.html#отnадка-сценариев" class="sidebar-link">Отладка сценариев</a></li></ul></li><li><a href="/ru/guide/ide-extension.html" class="sidebar-link">Поддержка IDE</a></li><li><a href="/ru/guide/text-printers.html" class="sidebar-link">Текстовые принтеры</a></li><li><a href="/ru/guide/characters.html" class="sidebar-link">Персонажи</a></li><li><a href="/ru/guide/backgrounds.html" class="sidebar-link">Фоны</a></li><li><a href="/ru/guide/transition-effects.html" class="sidebar-link">Эффекты переходов</a></li><li><a href="/ru/guide/special-effects.html" class="sidebar-link">Спецэффекты</a></li><li><a href="/ru/guide/audio.html" class="sidebar-link">Аудио</a></li><li><a href="/ru/guide/voicing.html" class="sidebar-link">Озвучивание</a></li><li><a href="/ru/guide/movies.html" class="sidebar-link">Видеоролики</a></li><li><a href="/ru/guide/choices.html" class="sidebar-link">Выборы</a></li><li><a href="/ru/guide/user-interface.html" class="sidebar-link">Пользовательский интерфейс</a></li><li><a href="/ru/guide/save-load-system.html" class="sidebar-link">Система сохранений-загрузок</a></li><li><a href="/ru/guide/game-settings.html" class="sidebar-link">Настройки игры</a></li><li><a href="/ru/guide/input-processing.html" class="sidebar-link">Обработка ввода</a></li><li><a href="/ru/guide/unlockable-items.html" class="sidebar-link">Разблокируемые элементы</a></li><li><a href="/ru/guide/custom-variables.html" class="sidebar-link">Пользовательские переменные</a></li><li><a href="/ru/guide/script-expressions.html" class="sidebar-link">Выражения сценария</a></li><li><a href="/ru/guide/managed-text.html" class="sidebar-link">Управляемый текст</a></li><li><a href="/ru/guide/localization.html" class="sidebar-link">Локализация</a></li><li><a href="/ru/guide/resource-providers.html" class="sidebar-link">Провайдеры ресурсов</a></li><li><a href="/ru/guide/community-modding.html" class="sidebar-link">Моддинг сообщества</a></li><li><a href="/ru/guide/development-console.html" class="sidebar-link">Консоль разработчика</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Программирование</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Расширения</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="сценарии-naninovel"><a href="#сценарии-naninovel" class="header-anchor">#</a> Сценарии Naninovel</h1> <p>Скрипты Naninovel – это текстовые документы (c расширениеv <code>.nani</code>), где вы контролируете то, что происходит в сценах. Ассеты сценариев создаются с помощью контекстного меню ассета <code>Create -&gt; Naninovel -&gt; Naninovel Script</code>. Вы можете открывать и редактировать их с помощью встроенного <a href="#visual-editor">визуального редактора</a> или с помощью внешнего текстового редактора, например блокнот, TextEdit или <a href="https://code.visualstudio.com" target="_blank" rel="noopener noreferrer">VS Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><img src="https://i.gyazo.com/f552c2ef323f9ec1171eba72e0c55432.png" alt=""></p> <p>Каждая строка в сценарии Naninovel представляет собой инструкцию, которая может быть командой, обычным текстом, меткой или комментарием. Тип оператора определяется литералом, который помещается в начале строки:</p> <table><thead><tr><th>Литерал</th> <th>Тип инструкции</th></tr></thead> <tbody><tr><td>@</td> <td><a href="#command-lines">Команда</a></td></tr> <tr><td>#</td> <td><a href="#label-lines">Метка</a></td></tr> <tr><td>;</td> <td><a href="#comment-lines">Комментарий</a></td></tr></tbody></table> <p>Если в начале строки нет ни одного из вышеуказанных литералов, она воспринимается как строка <a href="#generic-text-lines">общего текста</a>.</p> <h2 id="командные-строки"><a href="#командные-строки" class="header-anchor">#</a> Командные строки</h2> <p>Строка воспринимается как командная, если начинается с литерала <code>@</code>. Команда представляет собой одиночную операцию, которая управляет тем, что происходит в сцене; например, она может быть использована для изменения фона, перемещения персонажа или загрузки другого сценария Naninovel.</p> <h3 id="идентификатор-команды"><a href="#идентификатор-команды" class="header-anchor">#</a> Идентификатор команды</h3> <p>Сразу после литерала команды ожидается идентификатор команды. Это может быть либо имя класса C#, реализующего команду, либо псевдоним команды (если он применяется через атрибут <code>CommandAlias</code>).</p> <p>Например, команда <a href="/api/#save" target="_blank"><code>@save</code></a> (используемая для автоматического сохранения игры) реализуется через C# класс <code>AutoSave</code>. Реализующий класс также имеет атрибут <code>[CommandAlias(&quot;save&quot;)]</code>, поэтому для вызова этой команды в скрипте можно использовать операторы <code>@save</code> и <code>@AutoSave</code>.</p> <p>Идентификаторы команд не чувствительны к регистру; все следующие операторы действительны и вызовут одну и ту же команду <code>AutoSave</code>:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@save</span></span>
<span class="token command function"><span class="token command-name">@Save</span></span>
<span class="token command function"><span class="token command-name">@AutoSave</span></span>
<span class="token command function"><span class="token command-name">@autosave</span></span>
</code></pre></div><h3 id="параметры-команд"><a href="#параметры-команд" class="header-anchor">#</a> Параметры команд</h3> <p>Большинство команд имеют ряд параметров, определяющих действие команды. Параметр – это выражение типа &quot;ключ-значение&quot;, определяемое после командного литерала, разделенного столбцом (<code>:</code>). Идентификатор параметра (ключ) может быть либо именем соответствующего поля параметра класса реализации команды, либо псевдонимом параметра (если он определен через свойство <code>alias</code> атрибута <code>CommandParameter</code>).</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@commandId</span><span class="token command-params"><span class="token command-param-id property"> paramId:</span><span class="token command-param-value operator">paramValue</span></span><span class="token whitespaces"> </span></span>
</code></pre></div><p>Рассмотрим команду <a href="/api/#hidechars" target="_blank"><code>@hideChars</code></a>, которая используется для скрытия всех видимых персонажей в сцене. Её можно использовать следующим образом:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@hideChars</span></span>
</code></pre></div><p>Вы можете здесь использовать параметр <code>time</code> типа <em>Decimal</em> для того, чтобы указать, как долго персонажи будут растворяться, прежде чем полностью скроются (исчезнут из сцены):</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@hideChars</span><span class="token command-params"><span class="token command-param-id property"> time:</span><span class="token command-param-value operator">5.5</span></span></span>
</code></pre></div><p>Так персонажи будут угасать в течение 5.5 секунд до того, как полностью исчезнут из сцены.</p> <p>Вы также можете использовать параметр <code>wait</code> типа <em>Boolean</em>, чтобы указать, следует ли выполнять следующую команду сразу после завершения текущей команды или дождаться ее завершения:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@hideChars</span><span class="token command-params"><span class="token command-param-id property"> time:</span><span class="token command-param-value operator">5.5</span><span class="token command-param-id property"> wait:</span><span class="token command-param-value operator">false</span></span></span>
<span class="token command function"><span class="token command-name">@hidePrinter</span></span>
</code></pre></div><p>Так текстовый принтер скроется сразу после того, как персонажи начнут исчезать. Если <code>wait</code> будет иметь значение <code>true</code> (или значение не будет указано), принтер будет скрыт только тогда, когда <a href="/api/#hidechars" target="_blank"><code>@hideChars</code></a> завершит выполнение.</p> <h3 id="типы-значений-параметров"><a href="#типы-значений-параметров" class="header-anchor">#</a> Типы значений параметров</h3> <p>В зависимости от собственного типа параметры могут ожидать один из следующих типов значений:</p> <table><thead><tr><th>Тип</th> <th>Описание</th></tr></thead> <tbody><tr><td>String</td> <td>Простое строковое значение, например: <code>LoremIpsum</code>. Не забудьте заключить строку в двойные кавычки, если она содержит пробелы, например: <code>&quot;Lorem ipsum dolor sit amet.&quot;</code>.</td></tr> <tr><td>Integer</td> <td>Число без дробей; целочисленное значение, например: <code>1</code>, <code>150</code>, <code>-25</code>.</td></tr> <tr><td>Decimal</td> <td>Десятичное число с дробью, отделённой точкой, например: <code>1.0</code>, <code>12.08</code>, <code>-0.005</code>.</td></tr> <tr><td>Boolean</td> <td>Имеет два доступных значения: <code>true</code> or <code>false</code> (нечуствительна к регистру).</td></tr> <tr><td>Named&lt;&gt;</td> <td>Строка имени, связанная со значением одного из вышеперечисленных типов. Часть имени отделена точкой. Например, для <em>Named&lt;Integer&gt;</em>: <code>foo.8</code>, <code>bar.-20</code>.</td></tr> <tr><td>List&lt;&gt;</td> <td>Список из значений одного из вышеперечисленных типов, разделённых точками. Например, для <em>List&lt;String&gt;</em>: <code>foo,bar,&quot;Lorem ipsum.&quot;</code>, для <em>List&lt;Decimal&gt;</em>: <code>12,-8,0.105,2</code></td></tr></tbody></table> <h3 id="безымянные-параметры"><a href="#безымянные-параметры" class="header-anchor">#</a> Безымянные параметры</h3> <p>Большинство команд имеют безымянный параметр. Параметр считается безымянным, если может быть использован без указания его имени.</p> <p>Например, команда <a href="/api/#bgm" target="_blank"><code>@bgm</code></a> ожидает безымянный параметр, указывающий имя музыкального трека, который нужно проиграть:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@bgm</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">PianoTheme</span></span></span>
</code></pre></div><p>&quot;PianoTheme&quot; здесь – это значение типа <em>String</em> параметра &quot;BgmPath&quot;.</p> <p>В каждой команде может быть только один безымянный параметр, и он всегда должен указываться перед любыми другими параметрами.</p> <h3 id="опционаnьные-и-обязатеnьные-параметры"><a href="#опционаnьные-и-обязатеnьные-параметры" class="header-anchor">#</a> Опциональные и обязательные параметры</h3> <p>Большинство параметров команды являются <em>опциональными</em>. Это означает, что они либо имеют предопределенное значение, либо просто не требуют никакого значения для выполнения команды. Например, если команда <a href="/api/#resettext" target="_blank"><code>@resetText</code></a> используется без указания каких-либо параметров, она сбросит текст в принтере по умолчанию, но вы также можете установить определенный ID принтера следующим образом: <code>@resetText printer:Dialogue</code>.</p> <p>Однако некоторые параметры являются <em>обязательными</em> для выполнения команды и всегда должны быть указаны.</p> <h3 id="справочик-команд-api"><a href="#справочик-команд-api" class="header-anchor">#</a> Справочик команд API</h3> <p>Для списка всех доступных сейчас команд с описанием, параметрами и примерами использования см. <a href="/ru/api/">справочник команд API</a>.</p> <h2 id="универсаnьные-текстовые-строки"><a href="#универсаnьные-текстовые-строки" class="header-anchor">#</a> Универсальные текстовые строки</h2> <p>Чтобы сделать написание скриптов с большим объемом текста более удобным, используются универсальные текстовые строки. Строка считается универсальным текстовым оператором, если она не начинается ни с одного из вышеуказанных литералов операторов:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
</code></pre></div><p>ID говорящего можно указать в начале универсальной текстовой строки, отделив их двоеточием (<code>:</code>), чтобы связать печатный текст с <a href="/ru/guide/characters.html">актором персонажа</a>:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Felix: Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
</code></pre></div><p>Чтобы сэкономить время и текст при постоянном изменении внешности персонажей, связанных с печатным текстом, вы также можете указать внешность после ID персонажа:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Felix.Happy: Lorem ipsum dolor sit amet.</span>
</code></pre></div><p>Строка выше аналогична следующим двум:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@char</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Felix.Happy</span><span class="token command-param-id property"> wait:</span><span class="token command-param-value operator">false</span></span></span>
<span class="token generic-text punctuation">Felix: Lorem ipsum dolor sit amet.</span>
</code></pre></div><h3 id="встраивание-команд"><a href="#встраивание-команд" class="header-anchor">#</a> Встраивание команд</h3> <p>Иногда вам может потребоваться выполнить команду во время отображения (печати) текстового сообщения, сразу после или перед определенным символом. Например, актор изменил бы свою внешность (выражение) при выведении определенного слова; или воспроизведение определенного звукового эффекта в ответ на какое-то событие, описанное в середине печатного сообщения. Функция встраивания команд позволяет обрабатывать подобные ситуации.</p> <p>Все команды, (как <a href="/ru/api/">встроенные</a> и <a href="/ru/guide/custom-commands.html">пользовательские</a>) могут быть встроены в универсальные текстовые строки с использованием квадратных скобок (<code>[</code>,<code>]</code>):</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Felix: Lorem ipsum<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">char</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Felix.Happy</span><span class="token command-param-value operator"> </span><span class="token command-param-id property">pos:</span><span class="token command-param-value operator">0.75 </span><span class="token command-param-id property">wait:</span><span class="token command-param-value operator">false</span><span class="token start-stop-char">]</span></span> dolor sit amet, consectetur adipiscing elit.<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">i</span><span class="token start-stop-char">]</span></span> Aenean tempus eleifend ante, ac molestie metus condimentum quis.<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">i</span><span class="token start-stop-char">]</span></span><span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">br</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">2</span><span class="token start-stop-char">]</span></span> Morbi nunc magna, consequat posuere consectetur in, dapibus consectetur lorem. Duis consectetur semper augue nec pharetra.</span>
</code></pre></div><p>Обратите внимание, что синтаксис встроенной команды остаётся точно таким же, за исключением того, что литерал <code>@</code> опущен, а тело команды заключено в квадратные скобки. Вы можете взять любую командную строку, встроить ее в общую текстовую строку, и она будет иметь точно такой же эффект, но в другой момент, в зависимости от позиции внутри текстового сообщения.</p> <p>Под капотом универсальные текстовые строки разбираются на отдельные команды, идентифицируемые встроенным индексом; текст печатается с помощью команды <a href="/ru/api/#print" target="_blank"><code>@print</code></a>. Например, следующая универсальная текстовая строка в скрипте Naninovel:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Lorem ipsum<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">char</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Felix.Happy</span><span class="token command-param-value operator"> </span><span class="token command-param-id property">pos:</span><span class="token command-param-value operator">75 </span><span class="token command-param-id property">wait:</span><span class="token command-param-value operator">false</span><span class="token start-stop-char">]</span></span> dolor sit amet.</span>
</code></pre></div><p>— в действительности обрабатывается движком как последовательность отдельных команд:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@print</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token quoted-string operator">&quot;Lorem ipsum&quot;</span><span class="token command-param-id property"> waitInput:</span><span class="token command-param-value operator">false</span></span></span>
<span class="token command function"><span class="token command-name">@char</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Felix.Happy</span><span class="token command-param-id property"> pos:</span><span class="token command-param-value operator">75</span><span class="token command-param-id property"> wait:</span><span class="token command-param-value operator">false</span></span></span>
<span class="token command function"><span class="token command-name">@print</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token quoted-string operator">&quot;dolor sit amet.&quot;</span></span></span>
</code></pre></div><p>Чтобы напечатать квадратные скобки через универсальную текстовую строку, экранируйте их с помощью обратного слэша, например:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Some text <span class="token escaped-char">\[</span> text inside brackets <span class="token escaped-char">\]</span></span>
</code></pre></div><p>— напечатает &quot;Some text [ text inside brackets ]&quot; в игре.</p> <h2 id="строки-метки"><a href="#строки-метки" class="header-anchor">#</a> Строки-метки</h2> <p>Метки используются в качестве &quot;якорей&quot; при навигации по сценариям Naninovel с помощью команд <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a>. Чтобы объявить метку, используйте литерал <code>#</code> в начале строки, за которым следует имя метки:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token label regex"># Epilogue</span>
</code></pre></div><p>Теперь можно использовать команду <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a>, чтобы &quot;прыгнуть&quot; к этой строке:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@goto</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">ScriptName.Epilogue</span></span></span>
</code></pre></div><p>В случае, если вы используете команду <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a> из того же сценария, в котором находится искомая метка, вы можете опустить имя сценария:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@goto</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">.Epilogue</span></span></span>
</code></pre></div><h2 id="строки-комментарии"><a href="#строки-комментарии" class="header-anchor">#</a> Строки-комментарии</h2> <p>Когда строка начинается с литерала точки с запятой (<code>;</code>), она считается оператором комментария. Строки комментариев полностью игнорируются движком при выполнении сценариев. Вы можете использовать строки комментариев для добавления заметок или аннотаций для себя или других членов команды, работающих со сценариями Naninovel.</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token comment">; Следующая команда выполнит автосохранение игры.</span>
<span class="token command function"><span class="token command-name">@save</span></span>
</code></pre></div><h2 id="усnовия-испоnнения"><a href="#усnовия-испоnнения" class="header-anchor">#</a> Условия исполнения</h2> <p>Хотя сценарий по умолчанию выполняется линейно, вы можете ввести ветвление, используя параметры <code>if</code>, поддерживаемые всеми командами.</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token comment">; Если значение `level` – это номер, и он больше 9000, добавить выбор.</span>
<span class="token command function"><span class="token command-name">@choice</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token quoted-string operator">&quot;It's over 9000!&quot;</span><span class="token command-param-id property"> if:</span><span class="token command-param-value operator">level&gt;9000</span></span></span>

<span class="token comment">; Ессли переменная `dead` – булева и имеет значение `false`, выполнить команду вывода текста.</span>
<span class="token command function"><span class="token command-name">@print</span><span class="token command-params"><span class="token command-param-id property"> text:</span><span class="token quoted-string operator">&quot;I'm still alive.&quot;</span><span class="token command-param-id property"> if:</span><span class="token command-param-value operator">!dead</span></span></span>

<span class="token comment">; Если переменная `glitch`– булева и имеет значение `true`, или функция вывода случайного числа в диапазоне от 1 до 10 </span>
<span class="token comment">; возвращает 5 или больше, выполнить команду `@spawn`.</span>
<span class="token command function"><span class="token command-name">@spawn</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">GlitchCamera</span><span class="token command-param-id property"> if:</span><span class="token quoted-string operator">&quot;glitch || Random(1, 10) &gt;= 5&quot;</span></span></span>

<span class="token comment">; Если `score` имеет значение от 7 до 13, или переменная `lucky`– булева </span>
<span class="token comment">; и возвращает `true`, загрузить скрипт `LuckyEnd`.</span>
<span class="token command function"><span class="token command-name">@goto</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">LuckyEnd</span><span class="token command-param-id property"> if:</span><span class="token quoted-string operator">&quot;(score &gt;= 7 &amp;&amp; score &lt;= 13) || lucky&quot;</span></span></span>

<span class="token comment">; Вы также можете использовать условия во встроенных командах.</span>
<span class="token generic-text punctuation">Lorem sit amet. <span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">style</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">bold</span><span class="token command-param-value operator"> </span><span class="token command-param-id property">if:</span><span class="token command-param-value operator">score&gt;=10</span><span class="token start-stop-char">]</span></span>Consectetur elit.<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">style</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">default</span><span class="token start-stop-char">]</span></span></span>

<span class="token comment">; Если в самом выражении используются двойные кавычки, </span>
<span class="token comment">; не забывайте дважды экранировать их.</span>
<span class="token command function"><span class="token command-name">@print</span><span class="token whitespaces"> </span><span class="token expression selector">{remark}</span><span class="token command-params"><span class="token command-param-id property"> if:</span><span class="token command-param-value operator">remark==</span><span class="token quoted-string operator">&quot;Saying \\&quot;</span><span class="token command-param-value operator">Stop </span><span class="token command-param-value operator">the</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">car\\&quot;</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">was</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">a</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">mistake.&quot;</span></span></span>
</code></pre></div><p>Также возможно указывать многострочные условные блоки с помощью команд <a href="/ru/api/#if" target="_blank"><code>@if</code></a>, <a href="/ru/api/#else" target="_blank"><code>@else</code></a>, <a href="/ru/api/#elseif" target="_blank"><code>@elseif</code></a> и <a href="/ru/api/#endif" target="_blank"><code>@endif</code></a>.</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token command function"><span class="token command-name">@if</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">score&gt;10</span></span></span>
<span class="token generic-text punctuation">	Good job, you've passed the test!</span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@bgm</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Victory</span></span></span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@spawn</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">Fireworks</span></span></span>
<span class="token command function"><span class="token command-name">@elseif</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">attempts&gt;100</span></span></span>
<span class="token generic-text punctuation">	You're hopeless... Need help?</span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@choice</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token quoted-string operator">&quot;Yeah, please!&quot;</span><span class="token command-param-id property"> goto:</span><span class="token command-param-value operator">.GetHelp</span></span></span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@choice</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token quoted-string operator">&quot;I'll keep trying.&quot;</span><span class="token command-param-id property"> goto:</span><span class="token command-param-value operator">.BeginTest</span></span></span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@stop</span></span>
<span class="token command function"><span class="token command-name">@else</span></span>
<span class="token generic-text punctuation">	You've failed. Try again!</span>
<span class="token generic-text punctuation">	</span><span class="token command function"><span class="token command-name">@goto</span><span class="token command-params"><span class="token command-param-value operator"> </span><span class="token command-param-value operator">.BeginTest</span></span></span>
<span class="token command function"><span class="token command-name">@endif</span></span>
</code></pre></div><p>Обратите внимание, что табуляции полностью опциональны и используются здесь только для лучшей читаемости.</p> <p>То же самое работает и для универсальных текстовых строк:</p> <div class="language-nani extra-class"><pre class="language-nani"><code><span class="token generic-text punctuation">Lorem ipsum dolor sit amet. <span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">if</span><span class="token command-param-value operator"> </span><span class="token command-param-value operator">score&gt;10</span><span class="token start-stop-char">]</span></span>Duis efficitur imperdiet nunc. <span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">else</span><span class="token start-stop-char">]</span></span>Vestibulum sit amet dolor non dolor placerat vehicula.<span class="token inline-command function"><span class="token start-stop-char">[</span><span class="token command-param-name name">endif</span><span class="token start-stop-char">]</span></span></span>
</code></pre></div><p>Для дополнительной информации о форматах условных выражений и доступных операторах см. гайд по <a href="/ru/guide/script-expressions.html">выражениям сценариев</a>.</p> <h2 id="визуаnьный-редактор"><a href="#визуаnьный-редактор" class="header-anchor">#</a> Визуальный редактор</h2> <p>Вы можете использовать визуальный редактор сценариев для редактирования сценариев Naninovel. Выберите ресурс сценария, и вы увидите, что визуальный редактор автоматически откроется в окне инспектора.</p> <p><video loop="loop" autoplay="autoplay" muted="muted" class="video"><source src="https://i.gyazo.com/ba57b9f78116e57408125325bdf66be9.mp4" type="video/mp4"></video></p> <p>Чтобы добавить новую строку в сценарий, щелкните правой кнопкой мыши в месте, куда вы хотите вставить строку, или же нажмите <code>Ctrl+Space</code> (вы можете изменить привязки клавиш по умолчанию в меню конфигурации ввода) и выберите нужную строку или тип команды. Чтобы изменить порядок строк, перетащите их за номерные метки. Чтобы удалить строку, щелкните ее правой кнопкой мыши и выберите пункт &quot;Удалить&quot;.</p> <p>Когда вы изменили сценарий с помощью визуального редактора, вы увидите звездочку (<code>*</code>) над именем сценария в заголовке инспектора. Это означает, что ассет был изменён и должен быть сохранен; нажмите <code>Ctrl+S</code>, чтобы сохранить ассет. Если вы попытаетесь выбрать другой ассет после изменения сценария, появится диалоговое окно, позволяющее либо сохранить, либо отменить изменения.</p> <p>Визуальный редактор автоматически синхронизирует отредактированный сценарий, если вы обновите его внешне, так что вы можете легко работать со сценариями как в текстовых, так и в визуальных редакторах. В случае, если автосинхронизация не работает, убедитесь, что функция <code>Auto Refresh</code> включена в меню редактора Unity <code>Edit -&gt; Preferences -&gt; General</code>.</p> <p>В режиме воспроизведения вы можете использовать визуальный редактор, чтобы отслеживать, какая строка сценария воспроизводится в данный момент, и щелкнуть правой кнопкой мыши строку, чтобы перемотать сценарий назад. Эта функция требует, чтобы сценарий имел одинаковый ID ресурса (при назначении в меню менеджера ресурсов) и имя ассета.</p> <p><video loop="loop" autoplay="autoplay" muted="muted" class="video"><source src="https://i.gyazo.com/b6e04d664ce4b513296b378b7c25be03.mp4" type="video/mp4"></video></p> <p>Строка, воспроизводимая в настоящее время, будет выделена зеленым цветом; когда воспроизведение скрипта будет остановлено при ожидании ввода пользователем, воспроизводимая строка будет выделена желтым цветом.</p> <p>Вы можете настроить поведение редактора и внешний вид в меню конфигурации сценариев.</p> <p><img src="https://i.gyazo.com/4b4b2608e7662b02a61b00734910308c.png" alt=""></p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/9UmccF9R9xI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <h2 id="схемы-сценариев"><a href="#схемы-сценариев" class="header-anchor">#</a> Схемы сценариев</h2> <p>При работе с большим количеством сценариев и нелинейных историй, удобным может быть наличие визуального представления развития истории. Здесь вам может пригодиться инструмент сценарных схем.</p> <p><video loop="loop" autoplay="autoplay" muted="muted" class="video"><source src="https://i.gyazo.com/0dd3ec2393807fb03d501028e1526895.mp4" type="video/mp4"></video></p> <p>Чтобы открыть окно схемы, испольуйте меню редактора <code>Naninovel -&gt; Script Graph</code>. Вы можете закрепить это окно как любую другую панель редактора, если хотите.</p> <p>Инструмент автоматически построит графическое представление всех сценариев Naninovel (в виде узлов), назначенных через ресурсы редактора (<code>Naninovel -&gt; Resources -&gt; Scripts</code>), и связей между ними.</p> <p>Соединения генерируются на основе команд <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a> и <a href="/ru/api/#gosub" target="_blank"><code>@gosub</code></a>. Если команде назначено условное выражение (параметр <code>if</code>), соответствующий порт в узле будет выделен желтым цветом, и вы сможете увидеть выражение при наведении курсора на порт.</p> <p>Вы можете выбрать ассет сценария и открыть визуальный редактор, дважды щелкнув по узлу или порту. Щелчок по портам также приведет к прокрутке визуального редактора до строки, содержащей метку (в случае, если была указана метка).</p> <p>Вы можете изменять положение узлов по своему усмотрению, и их позиции будут автоматически сохранены при закрытии окна схемы или выходе из Unity; затем позиции будут восстановлены при повторном открытии окна. Вы также можете сохранить положения вручную, нажав кнопку &quot;Save&quot;. Нажатие кнопки &quot;Auto Align&quot; приведет к сбросу всех позиций.</p> <p>При изменении сценариев или добавлении новых нажмите кнопку &quot;Rebuild Graph&quot;, чтобы синхронизировать изменения.</p> <h2 id="горячая-перезагрузка"><a href="#горячая-перезагрузка" class="header-anchor">#</a> Горячая перезагрузка</h2> <p>Можно редактировать сценарии в режиме воспроизведения (как с помощью визуальных, так и внешних редакторов) и сразу же применять изменения, не перезапуская игру. Эта функция управляется через свойство <code>Hot Reload Scripts</code> в конфигурации сценариев и включена по умолчанию.</p> <p>При изменении, добавлении или удалении строки перед воспроизводимой в данный момент, откат состояния автоматически произойдет с измененной строкой, чтобы предотвратить несоответствие состояния.</p> <p>В случае, если горячая перезагрузка не работает, убедитесь, что включено свойство <code>Auto Refresh</code>, а <code>Script Changes While Playing</code> установлено на <code>Recompile And Continue Playing</code>. Оба свойства можно найти в меню редактора Unity <code>Edit -&gt; Preferences -&gt; General</code>.</p> <p><img src="https://i.gyazo.com/5d433783e1a12531c79fe6be80c92da7.png" alt=""></p> <p>Чтобы вручную инициировать горячую перезагрузку текущего сценария Naninovel (например, при редактировании файла скрипта вне проекта Unity), используйте <a href="/ru/guide/development-console.html">консольную команду</a> <code>reload</code>. Команда предназначена только для редактора (не будет работать в сборках).</p> <h2 id="поддержка-ide"><a href="#поддержка-ide" class="header-anchor">#</a> Поддержка IDE</h2> <p>Такие функции IDE, как подсветка синтаксиса, проверка ошибок, автозавершение и интерактивная документация, могут значительно повысить производительность при написании сценариев. Мы сделали расширение для бесплатного open-source <a href="https://code.visualstudio.com" target="_blank" rel="noopener noreferrer">VS Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (доступен для Windows, MacOS и Linux), которое обеспечивает существенную поддержку IDE для синтаксиса NaniScript.</p> <p><img src="https://i.gyazo.com/b1f5c6845c04d1b18b2196aa29ea6c19.png" alt=""></p> <p>Посмотрите следующий видеогайд по активации и использованию расширения.</p> <p></p><div class="video-container"><iframe src="https://www.youtube-nocookie.com/embed/y87wd5jHfFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div><p></p> <p>Поддержка других редакторов возможна в будущем; проверьте <a href="https://github.com/Naninovel/Documentation/issues/56#issuecomment-492987029" target="_blank" rel="noopener noreferrer">тему на GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> для получения дополнительной информации.</p> <h2 id="отnадка-сценариев"><a href="#отnадка-сценариев" class="header-anchor">#</a> Отладка сценариев</h2> <p>При работе с большими сценариями Naninovel может стать утомительным всегда воспроизводить их с самого начала, чтобы проверить, как все работает в определенных частях скрипта.</p> <p>С помощью <a href="/ru/guide/development-console.html">консоли разработчика</a> вы можете мгновенно &quot;перемотать&quot; воспроизводимый в данный момент сценарий на произвольную строку:</p> <div class="language- extra-class"><pre class="language-text"><code>rewind 12
</code></pre></div><p>— начнёт воспроизведение текущего скрипта с 12-й строки; вы можете перемотать его вперед и назад таким же образом. Чтобы открыть консоль во время работы игры, убедитесь, что консоль включена в конфигурации движка, и нажмите клавишу <code>~</code> (может быть изменена в конфигурации) или выполните мультитач (3 или более одновременных касаний) в случае, если сборка проигрывается на устройстве с сенсорным экраном.</p> <p>Чтобы узнать, какой сценарий и какая строка воспроизводятся в данный момент, используйте окно отладки: введите <code>debug</code> в консоли разработки и нажмите <code>Enter</code>, чтобы открыть окно.</p> <p><img src="https://i.gyazo.com/12772ecc7c14011bcde4a74c81e997b8.png" alt="Отладка сценариев"></p> <p>В заголовке окна отображаются имя текущего воспроизводимого сценария, номер строки и индекс команды. Если включена функция [автоозвучивания](/ru/guide/voicing.md#автоматическое озвучивание), то также будет отображаться имя соответствующего голосового клипа. Вы можете изменить положение окна, перетащив его по заголовку. Кнопка &quot;Stop&quot; остановит выполнение скрипта; когда проигрыватель скриптов остановлен, кнопка &quot;Play&quot; возобновит выполнение. Вы можете закрыть окно отладки, нажав кнопку &quot;Close&quot;.</p> <p>Окно отладки доступно как в редакторе, так и в сборках.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Обновлено:</span> <span class="time">October 28, 2020</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ru/guide/configuration.html" class="prev">
        Конфигурация
      </a></span> <span class="next"><a href="/ru/guide/ide-extension.html">
        Поддержка IDE
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7081dc02.js" defer></script><script src="/assets/js/3.edd03593.js" defer></script><script src="/assets/js/132.58b3c0d0.js" defer></script>
  </body>
</html>
